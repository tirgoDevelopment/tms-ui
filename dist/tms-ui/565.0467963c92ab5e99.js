"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[565],{3565:(ii,j,l)=>{l.r(j),l.d(j,{default:()=>ei});var $=l(2480),t=l(2223);let X=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-orders"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(o,n){1&o&&t._UZ(0,"router-outlet")},dependencies:[$.Bz,$.lC],encapsulation:2})}return i})();var m=l(4755),s=l(9401),Z=l(1728),J=l(3314),q=l(1217),_=l(9114),A=l(430),I=l(7406),c=l(3627),b=l(3617),P=l(6205),k=l(3276),w=l(8467),O=l(9646),L=l(3900),S=l(4004),Y=l(262),Q=l(3556),C=l(9609),D=l(787),p=l(1591),v=l(5580),T=l(3649),H=l(5707),N=l(1848),z=l(4586),B=l(5656),K=l(3648),y=l(2340),W=l(3144);let U=(()=>{class i{constructor(e){this.http=e}getWaitingOrders(e,o,n,u){let a=`${y.O.apiOrders}/orders/drivers/all-waiting-orders?pageSize=${e.size}&pageIndex=${e.currentPage}`;return o&&(a+=`&${o}`),n&&u&&(a+=`&sortBy=${n}&sortType=${u}`),this.http.get(a)}getActiveOrders(e,o,n,u,a){let d=`${y.O.apiOrders}/orders/drivers/merchant-active-orders?merchantId=${e}&pageSize=${o.size}&pageIndex=${o.currentPage}`;return n&&(d+=`&${n}`),u&&a&&(d+=`&sortBy=${u}&sortType=${a}`),this.http.get(d)}getArchiveOrders(e,o,n,u,a){let d=`${y.O.apiOrders}/orders/drivers/archive-orders-by?driverId=${e}&pageSize=${o.size}&pageIndex=${o.currentPage}`;return n&&(d+=`&${n}`),u&&a&&(d+=`&sortBy=${u}&sortType=${a}`),this.http.get(d)}getOrderById(e){return this.http.get(y.O.apiOrders+"/orders/drivers/order-by-id?orderId="+e)}assignDriver(e){return this.http.post(y.O.apiOrders+"/orders/drivers/offer-price",e)}acceptOffer(e){return this.http.post(y.O.apiOrders+"/orders/drivers/accept-offer?id="+e)}contrOffer(e){return this.http.post(y.O.apiOrders+"/orders/drivers/offer-price",e)}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(W.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var G=l(2621);function V(i,r){if(1&i&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function tt(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1," \u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c "),t.qZA())}function et(i,r){1&i&&t._UZ(0,"mat-progress-spinner",17),2&i&&t.Q6J("diameter",24)("mode","indeterminate")}let it=(()=>{class i{constructor(e,o,n,u,a,d){this.data=e,this.toastr=o,this.formBuilder=n,this.ordersService=u,this.typesService=a,this.dialog=d,this.isLoading=!1}ngOnInit(){this.currentUser=(0,B.o)(localStorage.getItem("tmc")),this.form=this.formBuilder.group({orderId:[this.data.id],driverId:[null,[s.kI.required]],amount:[null,[s.kI.required]],curencyId:[null,[s.kI.required]]}),this.typesService.getCurrencies().subscribe(e=>{e.success&&(this.currencies=e.data,this.form.patchValue({curencyId:this.currencies[0].id}))})}submit(){this.form.disable(),this.ordersService.assignDriver(this.form.value).subscribe(e=>{e.success&&(this.form.enable(),this.toastr.success("Success"),this.dialog.closeAll())},e=>{this.form.enable(),"dataNotFound"==e.error.message&&this.toastr.error("\u0414\u0440\u0430\u0439\u0432\u0435\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),"alreadyOfferedToThisOrder"==e.error.message&&this.toastr.error("\u0423\u0436\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u043b\u0441\u044f \u043a \u044d\u0442\u043e\u043c\u0443 \u0437\u0430\u043a\u0430\u0437\u0443"),this.toastr.error("driverHasOrder"==e.error.message?"\u0423 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u0435\u0441\u0442\u044c \u0417\u0430\u043a\u0430\u0437":e.error.message)})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(v.WI),t.Y36(K._W),t.Y36(s.qu),t.Y36(U),t.Y36(G.K),t.Y36(v.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-assign-driver"]],standalone:!0,features:[t.jDz],decls:22,vars:6,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"mt-8","w-full","overflow-y-scroll",3,"formGroup"],["signInNgForm","ngForm"],[1,"flex","flex-col"],[1,"flex-auto","gt-xs:pr-3","md:w-72","sm:w-full"],["matInput","","formControlName","driverId","type","number"],[1,"flex-auto"],["matInput","","formControlName","amount","type","number"],["formControlName","curencyId","matPrefix",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-10",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"value"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"form",4,5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 ID \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"),t.qZA(),t._UZ(12,"input",8),t.qZA(),t.TgZ(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"\u0426\u0435\u043d\u0430"),t.qZA(),t._UZ(16,"input",10),t.TgZ(17,"mat-select",11),t.YNc(18,V,2,2,"mat-option",12),t.qZA()()(),t.TgZ(19,"button",13),t.NdJ("click",function(){return n.submit()}),t.YNc(20,tt,2,0,"span",14),t.YNc(21,et,1,2,"mat-progress-spinner",15),t.qZA()()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(12),t.Q6J("ngForOf",n.currencies),t.xp6(1),t.Q6J("color","primary")("disabled",n.form.disabled),t.xp6(1),t.Q6J("ngIf",!n.form.disabled),t.xp6(1),t.Q6J("ngIf",n.form.disabled))},dependencies:[A.Ps,A.Hw,b.Nh,m.O5,z.D,_.lN,_.KE,_.hX,_.qo,C.c,C.Nt,D.LD,D.gD,q.ey,s.u5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.UX,s.sg,s.u,N.te,v.Is,v.ZT,H.y4,Z.ot,Z.lW,Z.RK,m.ax,T.AV]})}return i})();var nt=l(7579),F=l(8951);let R=(()=>{class i{constructor(e){this.authService=e,this.receivedDataSubject=new nt.x}getUpdates(){return this.authService.accessToken?(this.eventSource.onmessage=o=>{const n=JSON.parse(o.data);this.receivedDataSubject.next(n)},this.eventSource.onerror=o=>{console.error("Error with SSE connection:",o)},this.receivedDataSubject.asObservable()):(0,O.of)(null)}closeConnection(){this.eventSource&&this.eventSource.close()}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(F.e))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ot=l(6403);function rt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041c\u0435\u0441\u0442\u043e \u0437\u0430\u0442\u0430\u043c\u043e\u0436\u043a\u0438"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.customsPlaceLocation,"")}}function ut(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0441\u0442\u0430\u043c\u043e\u0436\u043a\u0438"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.customsClearancePlaceLocation,"")}}function at(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.additionalLoadingLocation,"")}}function lt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u0432\u044b\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.additionalDeliveryLocation,"")}}function st(i,r){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function ct(i,r){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function dt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u0432\u0442\u043e\u0432\u043e\u0437"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.refrigeratorCount,"")}}function pt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u0420\u0435\u0436\u0438\u043c \u043e\u0442 (\xb0\u0421)"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.refrigeratorFrom,"")}}function mt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u0420\u0435\u0436\u0438\u043c \u0434\u043e (\xb0\u0421)"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.refrigeratorTo,"")}}function _t(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041a\u0440\u044e\u043a"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.isHook,"")}}function ft(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041e\u0431\u044a\u0435\u043c(\u043b)"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.cisternVolume,"")}}function gt(i,r){if(1&i&&(t.TgZ(0,"div")(1,"p",11),t._uU(2,"\u041e\u0431\u044a\u0435\u043c(\u0444)"),t.qZA(),t.TgZ(3,"p",12),t._uU(4),t.qZA()()),2&i){const e=t.oxw();t.xp6(4),t.hij(" ",e.data.containerVolume,"")}}function ht(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.assignDriver())}),t._uU(1," \u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044f "),t.qZA()}}function vt(i,r){1&i&&(t.TgZ(0,"p",23),t._uU(1,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),t.qZA())}function Zt(i,r){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("",null==e.driver.phoneNumbers[0]?null:e.driver.phoneNumbers[0].phoneNumber," ")}}function xt(i,r){if(1&i&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function At(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-form-field",28)(1,"input",29),t.NdJ("ngModelChange",function(n){t.CHM(e);const u=t.oxw(3);return t.KtG(u.editedAmount=n)}),t.qZA(),t.TgZ(2,"mat-select",30),t.NdJ("ngModelChange",function(n){t.CHM(e);const u=t.oxw(3);return t.KtG(u.editedCurrencyId=n)}),t.YNc(3,xt,2,2,"mat-option",31),t.qZA()()}if(2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngModel",e.editedAmount),t.xp6(1),t.Q6J("ngModel",e.editedCurrencyId),t.xp6(1),t.Q6J("ngForOf",e.currencies)}}function Ct(i,r){if(1&i&&(t.TgZ(0,"p",12),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.AsE("",e.amount," ",e.currency.name,"")}}function Tt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,u=t.oxw(2);return t.KtG(u.editOffer(n))}),t._uU(1,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),t.qZA()}}function bt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,u=t.oxw(2);return t.KtG(u.acceptDriver(n))}),t._uU(1),t.qZA()}if(2&i){const e=t.oxw(2).$implicit;t.Q6J("disabled","driver_merchant_user"==e.createdBy.userType),t.xp6(1),t.Oqu("driver_merchant_user"==e.createdBy.userType?"\u041e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430":"\u041f\u0440\u0438\u043d\u044f\u0442\u044c")}}function Ot(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.cancelEditing())}),t._uU(1,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),t.qZA()}}function Dt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2).$implicit,u=t.oxw(2);return t.KtG(u.saveEditedOffer(n))}),t._uU(1,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),t.qZA()}}function yt(i,r){if(1&i&&(t.TgZ(0,"div",33),t.YNc(1,Tt,2,0,"button",34),t.YNc(2,bt,2,2,"button",35),t.YNc(3,Ot,2,0,"button",34),t.YNc(4,Dt,2,0,"button",36),t.qZA()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf","driver_merchant_user"!==e.createdBy.userType&&!o.editing),t.xp6(1),t.Q6J("ngIf",!o.editing),t.xp6(1),t.Q6J("ngIf",o.editing),t.xp6(1),t.Q6J("ngIf",o.editing)}}function wt(i,r){if(1&i&&(t.TgZ(0,"div",21)(1,"div",10)(2,"div",22)(3,"p",23),t._uU(4,"ID"),t.qZA(),t.TgZ(5,"p",12),t._uU(6),t.qZA()(),t.TgZ(7,"div",22),t.YNc(8,vt,2,0,"p",24),t.YNc(9,Zt,2,1,"p",25),t.qZA(),t.TgZ(10,"div")(11,"p",23),t._uU(12,"\u0424\u0418\u041e"),t.qZA(),t.TgZ(13,"p",12),t._uU(14),t.qZA()(),t.TgZ(15,"div")(16,"p",23),t._uU(17,"\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u0430\u044f \u0446\u0435\u043d\u0430"),t.qZA(),t.YNc(18,At,4,3,"mat-form-field",26),t.YNc(19,Ct,2,2,"p",25),t.qZA()(),t.YNc(20,yt,5,4,"div",27),t.qZA()),2&i){const e=r.$implicit,o=t.oxw(2);t.xp6(6),t.hij("#",e.id,""),t.xp6(2),t.Q6J("ngIf",0!==o.data.cargoStatus.code),t.xp6(1),t.Q6J("ngIf",0!==o.data.cargoStatus.code),t.xp6(5),t.AsE("",e.driver.lastName," ",e.driver.firstName,""),t.xp6(4),t.Q6J("ngIf",o.editing),t.xp6(1),t.Q6J("ngIf",!o.editing),t.xp6(1),t.Q6J("ngIf",0==o.data.cargoStatus.code)}}function qt(i,r){if(1&i&&(t.TgZ(0,"mat-tab",19),t.YNc(1,wt,21,8,"div",20),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data.driverOffers)}}const E=function(i,r){return[i,r]};let M=(()=>{class i{constructor(e,o,n,u,a,d){this.data=e,this.sseService=o,this.orderService=n,this.typesService=u,this.dialog=a,this.toastr=d,this.editing=!1}ngOnInit(){this.typesService.getCurrencies().subscribe(e=>{e.success&&(this.currencies=e.data)})}getOrderById(){this.orderService.getOrderById(this.data.id).subscribe(e=>{e.success&&(this.data=e.data,this.updateDriverOffers())})}assignDriver(){this.dialog.open(it,{autoFocus:!1,disableClose:!0,data:this.data})}editOffer(e){this.editing=!0,this.originalAmount=e.amount,this.originalCurrencyId=e.currency.id,this.editedAmount=e.amount,this.editedCurrencyId=e.currency.id}saveEditedOffer(e){this.originalAmount==this.editedAmount?this.toastr.warning("\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043e \u0441\u0443\u043c\u043c\u0435 \u043d\u0435 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u043e\u0441\u044c"):this.orderService.contrOffer({orderId:this.data.id,driverId:e.driver.id,amount:this.editedAmount,curencyId:this.editedCurrencyId}).subscribe(n=>{n.success&&(this.toastr.success("Updated"),this.dialog.closeAll())},n=>{this.toastr.error(n.error.message)})}cancelEditing(){this.editedAmount=this.originalAmount,this.editedCurrencyId=this.originalCurrencyId,this.editing=!1}updateDriverOffers(){this.data.driverOffers&&Array.isArray(this.data.driverOffers)&&(this.data.driverOffers=this.data.driverOffers.filter(e=>0==e.rejected))}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(v.WI),t.Y36(R),t.Y36(U),t.Y36(G.K),t.Y36(v.uw),t.Y36(K._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-order-detail"]],standalone:!0,features:[t.jDz],decls:127,vars:55,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],["label","\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"],[1,"h-full"],[1,"h-60","w-full","mt-4"],[3,"center","zoom"],[3,"referencePoints"],[1,"max-w-md","mx-auto","mt-3","rounded-lg"],[1,"grid","grid-cols-2","gap-4"],[1,"text-lg","mb-1"],[1,"font-bold"],[4,"ngIf"],["class","font-bold",4,"ngFor","ngForOf"],[1,"my-8"],["class","fuse-mat-button bg-[#F97C00] text-white","mat-flat-button","",3,"click",4,"ngIf"],["label","\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f",4,"ngIf"],["mat-flat-button","",1,"fuse-mat-button","bg-[#F97C00]","text-white",3,"click"],["label","\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f"],["class","max-w-sm p-4 my-4 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"max-w-sm","p-4","my-4","bg-white","border","border-gray-200","rounded-lg","shadow","dark:bg-gray-800","dark:border-gray-700"],[1,"mb-2"],[1,"text-base","mb-1","text-slate-500"],["class","text-base mb-1 text-slate-500",4,"ngIf"],["class","font-bold",4,"ngIf"],["class","flex-auto",4,"ngIf"],["class","flex gap-2 w-full",4,"ngIf"],[1,"flex-auto"],["type","number","matInput","",3,"ngModel","ngModelChange"],["matPrefix","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","gap-2","w-full"],["type","button","class","px-3 py-2 hover:bg-primary hover:text-white hover:border-primary text-primary border border-primary text-sm font-medium rounded-lg mt-3 w-full",3,"click",4,"ngIf"],["type","button","class","px-3 py-2 text-white text-sm bg-primary font-medium rounded-lg mt-3 w-full hover:opacity-95",3,"disabled","click",4,"ngIf"],["type","button","class","px-3 py-2 text-white text-sm bg-primary font-medium rounded-lg mt-3 w-full hover:opacity-95",3,"click",4,"ngIf"],["type","button",1,"px-3","py-2","hover:bg-primary","hover:text-white","hover:border-primary","text-primary","border","border-primary","text-sm","font-medium","rounded-lg","mt-3","w-full",3,"click"],["type","button",1,"px-3","py-2","text-white","text-sm","bg-primary","font-medium","rounded-lg","mt-3","w-full","hover:opacity-95",3,"disabled","click"],["type","button",1,"px-3","py-2","text-white","text-sm","bg-primary","font-medium","rounded-lg","mt-3","w-full","hover:opacity-95",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-tab-group")(7,"mat-tab",4)(8,"mat-dialog-content",5)(9,"div",6)(10,"ya-map",7),t._UZ(11,"ya-multiroute",8),t.qZA()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div")(15,"p",11),t._uU(16,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(17,"p",12),t._uU(18),t.qZA()(),t.TgZ(19,"div")(20,"p",11),t._uU(21,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(22,"p",12),t._uU(23),t.qZA()(),t.YNc(24,rt,5,1,"div",13),t.YNc(25,ut,5,1,"div",13),t.YNc(26,at,5,1,"div",13),t.YNc(27,lt,5,1,"div",13),t.TgZ(28,"div")(29,"p",11),t._uU(30,"\u0422\u0438\u043f \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t.TgZ(31,"p",12),t._uU(32),t.qZA()(),t.TgZ(33,"div")(34,"p",11),t._uU(35,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.YNc(36,st,2,1,"p",14),t.qZA(),t.TgZ(37,"div")(38,"p",11),t._uU(39,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.YNc(40,ct,2,1,"p",14),t.qZA(),t.TgZ(41,"div")(42,"p",11),t._uU(43,"\u0420\u0430\u0437\u043c\u0435\u0440 \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t.TgZ(44,"p",12),t._uU(45),t.qZA()(),t.TgZ(46,"div")(47,"p",11),t._uU(48,"\u0412\u0435\u0441 \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t.TgZ(49,"p",12),t._uU(50),t.qZA()(),t.TgZ(51,"div")(52,"p",11),t._uU(53,"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(54,"p",12),t._uU(55),t.qZA()(),t.TgZ(56,"div")(57,"p",11),t._uU(58,"\u0410\u0432\u0430\u043d\u0441"),t.qZA(),t.TgZ(59,"p",12),t._uU(60),t.qZA()(),t.TgZ(61,"div")(62,"p",11),t._uU(63,"\u0414\u0430\u0442\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430"),t.qZA(),t.TgZ(64,"p",12),t._uU(65),t.ALo(66,"dateFormat"),t.qZA()(),t.TgZ(67,"div")(68,"p",11),t._uU(69,"\u0417\u0430\u043a\u0430\u0437 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d \u043d\u0430"),t.qZA(),t.TgZ(70,"p",12),t._uU(71),t.ALo(72,"dateFormat"),t.qZA()(),t.TgZ(73,"div")(74,"p",11),t._uU(75,"\u0421\u0442\u0430\u0442\u0443\u0441"),t.qZA(),t.TgZ(76,"p",12),t._uU(77),t.qZA()(),t.TgZ(78,"div")(79,"p",11),t._uU(80,"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"),t.qZA(),t.TgZ(81,"p",12),t._uU(82),t.qZA()(),t.TgZ(83,"div")(84,"p",11),t._uU(85,"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430"),t.qZA(),t.TgZ(86,"p",12),t._uU(87),t.qZA()(),t.TgZ(88,"div")(89,"p",11),t._uU(90,"ADR"),t.qZA(),t.TgZ(91,"p",12),t._uU(92),t.qZA()(),t.TgZ(93,"div")(94,"p",11),t._uU(95,"Carnet TIR"),t.qZA(),t.TgZ(96,"p",12),t._uU(97),t.qZA()(),t.TgZ(98,"div")(99,"p",11),t._uU(100,"\u0413\u041b\u041e\u041d\u0410\u0421\u0421"),t.qZA(),t.TgZ(101,"p",12),t._uU(102),t.qZA()(),t.TgZ(103,"div")(104,"p",11),t._uU(105,"\u041f\u0430\u0440\u043e\u043c\u043e\u043c"),t.qZA(),t.TgZ(106,"p",12),t._uU(107),t.qZA()(),t.YNc(108,dt,5,1,"div",13),t.YNc(109,pt,5,1,"div",13),t.YNc(110,mt,5,1,"div",13),t.YNc(111,_t,5,1,"div",13),t.YNc(112,ft,5,1,"div",13),t.YNc(113,gt,5,1,"div",13),t.TgZ(114,"div")(115,"p",11),t._uU(116,"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(117,"p",12),t._uU(118),t.qZA()(),t.TgZ(119,"div")(120,"p",11),t._uU(121,"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430"),t.qZA(),t.TgZ(122,"p",12),t._uU(123),t.qZA()()(),t.TgZ(124,"div",15),t.YNc(125,ht,2,0,"button",16),t.qZA()()()(),t.YNc(126,qt,2,1,"mat-tab",17),t.qZA()),2&o&&(t.xp6(2),t.hij("ID #",n.data.id,""),t.xp6(8),t.Q6J("center",t.WLB(43,E,n.data.loadingLocation.latitude,n.data.loadingLocation.longitude))("zoom",12),t.xp6(1),t.Q6J("referencePoints",t.WLB(52,E,t.WLB(46,E,n.data.loadingLocation.latitude,n.data.loadingLocation.longitude),t.WLB(49,E,n.data.deliveryLocation.latitude,n.data.deliveryLocation.longitude))),t.xp6(7),t.Oqu(n.data.loadingLocation.name),t.xp6(5),t.Oqu(n.data.deliveryLocation.name),t.xp6(1),t.Q6J("ngIf",n.data.customsPlaceLocation),t.xp6(1),t.Q6J("ngIf",n.data.customsClearancePlaceLocation),t.xp6(1),t.Q6J("ngIf",n.data.additionalLoadingLocation),t.xp6(1),t.Q6J("ngIf",n.data.additionalDeliveryLocation),t.xp6(5),t.Oqu(n.data.cargoType.name),t.xp6(4),t.Q6J("ngForOf",n.data.transportTypes),t.xp6(4),t.Q6J("ngForOf",n.data.transportKinds),t.xp6(5),t.lnq(" \u0434: ",n.data.cargoLength?n.data.cargoLength+"\u0441\u043c.":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," \u0428: ",n.data.cargoWidth?n.data.cargoWidth+"\u0441\u043c.":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," \u0412: ",n.data.cargoHeight?n.data.cargoHeight+"\u0441\u043c.":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," "),t.xp6(5),t.hij(" ",n.data.cargoWeight?n.data.cargoWeight+"\u043a\u0433":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," "),t.xp6(5),t.hij(" ",n.data.offeredPrice?n.data.offeredPrice+" "+n.data.offeredPriceCurrency.name:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," "),t.xp6(5),t.hij(" ",n.data.inAdvancePrice?n.data.inAdvancePrice+" "+n.data.inAdvancePriceCurrency.name:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," "),t.xp6(5),t.Oqu(t.lcZ(66,38,n.data.createdAt)),t.xp6(6),t.Oqu(t.xi3(72,40,n.data.sendDate,!1)),t.xp6(6),t.hij(" ",n.data.cargoStatus.name,""),t.xp6(5),t.hij(" ","cash"==n.data.paymentMethod?"\u041d\u0430\u043b\u0438\u0447\u0438":"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",""),t.xp6(5),t.hij(" ",n.data.isSafeTransaction?"\u0414\u0430":"\u041d\u0435\u0442",""),t.xp6(5),t.hij(" ",n.data.isAdr?"\u0414\u0430":"\u041d\u0435\u0442",""),t.xp6(5),t.hij(" ",n.data.isCarnetTir?"\u0414\u0430":"\u041d\u0435\u0442",""),t.xp6(5),t.hij(" ",n.data.isGlonas?"\u0414\u0430":"\u041d\u0435\u0442",""),t.xp6(5),t.hij(" ",n.data.isParanom?"\u0414\u0430":"\u041d\u0435\u0442",""),t.xp6(1),t.Q6J("ngIf",n.data.refrigeratorCount),t.xp6(1),t.Q6J("ngIf",n.data.refrigeratorFrom),t.xp6(1),t.Q6J("ngIf",n.data.refrigeratorTo),t.xp6(1),t.Q6J("ngIf",n.data.isHook),t.xp6(1),t.Q6J("ngIf",n.data.cisternVolume),t.xp6(1),t.Q6J("ngIf",n.data.containerVolume),t.xp6(5),t.hij(" ",n.data.loadingMethod?n.data.loadingMethod:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430",""),t.xp6(5),t.hij(" ",n.data.cargoPackage?n.data.cargoPackage:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430",""),t.xp6(2),t.Q6J("ngIf",0==n.data.cargoStatus.code),t.xp6(1),t.Q6J("ngIf",n.data.driverOffers.length))},dependencies:[A.Ps,A.Hw,b.Nh,b.uX,b.SP,m.O5,z.D,ot.E,_.lN,_.KE,_.qo,C.c,C.Nt,D.LD,D.gD,q.ey,s.u5,s.Fj,s.wV,s.JJ,s.On,s.UX,N.te,N.k0,N.Vz,v.Is,v.ZT,v.uh,v.xY,H.y4,Z.ot,Z.lW,Z.RK,m.ax,T.AV],styles:["[_nghost-%COMP%]     .mat-mdc-dialog-container .mdc-dialog__surface{border-radius:2px!important;padding:15px 20px}[_nghost-%COMP%]     ::-webkit-scrollbar{display:none}[_nghost-%COMP%]     .mat-mdc-dialog-content{max-height:83vh;padding:0!important}[_nghost-%COMP%]     .mdc-dialog__title{padding:0 0 9px!important}[_nghost-%COMP%]     .mat-dialog-content::-webkit-scrollbar{width:2px}[_nghost-%COMP%]     .mat-dialog-content::-webkit-scrollbar-thumb{background-color:#888;border-radius:5px}[_nghost-%COMP%]     .mat-dialog-content::-webkit-scrollbar-track{background-color:#eee}[_nghost-%COMP%]     .yandex{height:calc(100% - 135px)}[_nghost-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-body-content{padding:0}"]})}return i})();function Ut(i,r){1&i&&t._UZ(0,"mat-spinner")}function Nt(i,r){if(1&i&&(t.TgZ(0,"div",32),t.YNc(1,Ut,1,0,"mat-spinner",33),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function Ft(i,r){1&i&&(t.TgZ(0,"th",34),t._uU(1," No "),t.qZA())}function Et(i,r){if(1&i&&(t.TgZ(0,"div",37),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.driverOffers.length,"")}}function Jt(i,r){if(1&i&&(t.TgZ(0,"td",35)(1,"div"),t._uU(2),t.YNc(3,Et,2,1,"div",36),t.qZA()()),2&i){const e=r.$implicit,o=r.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(1),t.Q6J("ngIf",e.driverOffers.length>0&&0==e.cargoStatus.code)}}function It(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("id"))}),t.TgZ(1,"div",39)(2,"div"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("id"))}}function Pt(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function kt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("loadingLocation"))}),t.TgZ(1,"div",39)(2,"div"),t._uU(3,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("loadingLocation"))}}function Lt(i,r){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.loadingLocation?null:e.loadingLocation.name),t.xp6(1),t.hij(" ",null==e.loadingLocation?null:e.loadingLocation.name,"")}}function St(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("deliveryLocation"))}),t.TgZ(1,"div",39)(2,"div"),t._uU(3,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("deliveryLocation"))}}function Yt(i,r){if(1&i&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.deliveryLocation?null:e.deliveryLocation.name),t.xp6(1),t.hij(" ",null==e.deliveryLocation?null:e.deliveryLocation.name,"")}}function Qt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("sendDate"))}),t.TgZ(1,"div",39)(2,"div"),t._uU(3,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("sendDate"))}}function Bt(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.sendDate,"dd.MM.YYYY")," ")}}function Mt(i,r){1&i&&(t.TgZ(0,"th",34),t._uU(1," \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430 "),t.qZA())}function jt(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.isSafeTransaction?"\u0414\u0430":"\u041d\u0435\u0442")}}function $t(i,r){1&i&&(t.TgZ(0,"th",34),t._uU(1," \u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430 "),t.qZA())}function Ht(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function zt(i,r){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Ht,3,1,"span",43),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.transportTypes)}}function Kt(i,r){if(1&i&&(t.TgZ(0,"td",40),t.YNc(1,zt,2,1,"span",33),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.transportTypes)}}function Gt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("offeredPrice"))}),t.TgZ(1,"div",39)(2,"div"),t._uU(3,"\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("offeredPrice"))}}function Rt(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.offeredPrice?null!==e.offeredPriceCurrency?e.offeredPrice+" "+e.offeredPriceCurrency.name:e.offeredPrice:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," ")}}function Xt(i,r){1&i&&t._UZ(0,"tr",44)}const Wt=function(i,r){return{"odd:bg-[#EFEFEF] dark:odd:bg-[#1E293BDB]":i,"even:bg-white dark:even:bg-[#1E293BDB]":r}};function Vt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",45),t.NdJ("click",function(){const u=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showOrderDetails(u))}),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("ngClass",t.WLB(1,Wt,e,e))}}function te(i,r){1&i&&(t.TgZ(0,"div",46),t._uU(1," \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 "),t.qZA())}function ee(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-pagination",47),t.NdJ("paginationEvent",function(n){t.CHM(e);const u=t.oxw();return t.KtG(u.onPaginationEvent(n))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("totalPagesCount",e.totalPagesCount)("size",e.size)("currentPage",e.currentPage)}}function ne(i,r){1&i&&t._UZ(0,"mat-spinner")}function oe(i,r){if(1&i&&(t.TgZ(0,"div",31),t.YNc(1,ne,1,0,"mat-spinner",32),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function re(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," No "),t.qZA())}function ue(i,r){if(1&i&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.driverOffers.length,"")}}function ae(i,r){if(1&i&&(t.TgZ(0,"td",34)(1,"div"),t._uU(2),t.YNc(3,ue,2,1,"div",35),t.qZA()()),2&i){const e=r.$implicit,o=r.index;t.xp6(2),t.hij(" ",o+1," "),t.xp6(1),t.Q6J("ngIf",e.driverOffers.length>0&&0==e.cargoStatus.code)}}function le(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("id"))}),t.TgZ(1,"div",38)(2,"div"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("id"))}}function se(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function ce(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("loadingLocation"))}),t.TgZ(1,"div",38)(2,"div"),t._uU(3,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("loadingLocation"))}}function de(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.loadingLocation?null:e.loadingLocation.name),t.xp6(1),t.Oqu(null==e.loadingLocation?null:e.loadingLocation.name)}}function pe(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("deliveryLocation"))}),t.TgZ(1,"div",38)(2,"div"),t._uU(3,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("deliveryLocation"))}}function me(i,r){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.deliveryLocation?null:e.deliveryLocation.name),t.xp6(1),t.Oqu(null==e.deliveryLocation?null:e.deliveryLocation.name)}}function _e(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("sendDate"))}),t.TgZ(1,"div",38)(2,"div"),t._uU(3,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("sendDate"))}}function fe(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.sendDate,"dd.MM.YYYY")," ")}}function ge(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430 "),t.qZA())}function he(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.isSafeTransaction?"\u0414\u0430":"\u041d\u0435\u0442")}}function ve(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," \u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430 "),t.qZA())}function Ze(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function xe(i,r){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,Ze,3,1,"span",41),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.transportTypes)}}function Ae(i,r){if(1&i&&(t.TgZ(0,"td",34),t.YNc(1,xe,2,1,"span",32),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.transportTypes)}}function Ce(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("offeredPrice"))}),t.TgZ(1,"div",38)(2,"div"),t._uU(3,"\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("offeredPrice"))}}function Te(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.offeredPrice?null!==e.offeredPriceCurrency?e.offeredPrice+" "+e.offeredPriceCurrency:e.offeredPrice:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," ")}}function be(i,r){1&i&&t._UZ(0,"tr",42)}const Oe=function(i,r){return{"odd:bg-[#EFEFEF] dark:odd:bg-[#1E293BDB]":i,"even:bg-white dark:even:bg-[#1E293BDB]":r}};function De(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",43),t.NdJ("click",function(){const u=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showOrderDetails(u))}),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("ngClass",t.WLB(1,Oe,e,e))}}function ye(i,r){1&i&&(t.TgZ(0,"div",44),t._uU(1," \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 "),t.qZA())}function we(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-pagination",45),t.NdJ("paginationEvent",function(n){t.CHM(e);const u=t.oxw();return t.KtG(u.onPaginationEvent(n))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("totalPagesCount",e.totalPagesCount)("size",e.size)("currentPage",e.currentPage)}}function Ue(i,r){1&i&&t._UZ(0,"mat-spinner")}function Ne(i,r){if(1&i&&(t.TgZ(0,"div",31),t.YNc(1,Ue,1,0,"mat-spinner",32),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function Fe(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," No "),t.qZA())}function Ee(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.index;t.xp6(1),t.hij(" ",e+1," ")}}function Je(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("id"))}),t.TgZ(1,"div",36)(2,"div"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("id"))}}function Ie(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function Pe(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("loadingLocation"))}),t.TgZ(1,"div",36)(2,"div"),t._uU(3,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("loadingLocation"))}}function ke(i,r){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.loadingLocation?null:e.loadingLocation.name),t.xp6(1),t.Oqu(null==e.loadingLocation?null:e.loadingLocation.name)}}function Le(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",37),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("deliveryLocation"))}),t.TgZ(1,"div",36)(2,"div"),t._uU(3,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("deliveryLocation"))}}function Se(i,r){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("matTooltip",null==e.deliveryLocation?null:e.deliveryLocation.name),t.xp6(1),t.Oqu(null==e.deliveryLocation?null:e.deliveryLocation.name)}}function Ye(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("sendDate"))}),t.TgZ(1,"div",36)(2,"div"),t._uU(3,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("sendDate"))}}function Qe(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.sendDate,"dd.MM.YYYY")," ")}}function Be(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430 "),t.qZA())}function Me(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Oqu(e.isSafeTransaction?"\u0414\u0430":"\u041d\u0435\u0442")}}function je(i,r){1&i&&(t.TgZ(0,"th",33),t._uU(1," \u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430 "),t.qZA())}function $e(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function He(i,r){if(1&i&&(t.TgZ(0,"span"),t.YNc(1,$e,3,1,"span",39),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.transportTypes)}}function ze(i,r){if(1&i&&(t.TgZ(0,"td",34),t.YNc(1,He,2,1,"span",32),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.transportTypes)}}function Ke(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"th",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("offeredPrice"))}),t.TgZ(1,"div",36)(2,"div"),t._uU(3,"\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u0430\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("offeredPrice"))}}function Ge(i,r){if(1&i&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.hij(" ",e.offeredPrice?null!==e.offeredPriceCurrency?e.offeredPrice+" "+e.offeredPriceCurrency:e.offeredPrice:"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u0430"," ")}}function Re(i,r){1&i&&t._UZ(0,"tr",40)}const Xe=function(i,r){return{"odd:bg-[#EFEFEF] dark:odd:bg-[#1E293BDB]":i,"even:bg-white dark:even:bg-[#1E293BDB]":r}};function We(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"tr",41),t.NdJ("click",function(){const u=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.showOrderDetails(u))}),t.qZA()}if(2&i){const e=r.$implicit;t.Q6J("ngClass",t.WLB(1,Xe,e,e))}}function Ve(i,r){1&i&&(t.TgZ(0,"div",42),t._uU(1," \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 "),t.qZA())}function ti(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"app-pagination",43),t.NdJ("paginationEvent",function(n){t.CHM(e);const u=t.oxw();return t.KtG(u.onPaginationEvent(n))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("totalPagesCount",e.totalPagesCount)("size",e.size)("currentPage",e.currentPage)}}const ei=[{path:"",component:X,resolve:{},children:[{path:"available",component:(()=>{class i{constructor(e,o,n){this.orderService=e,this.authService=o,this.dialog=n,this.totalPagesCount=1,this.size=5,this.currentPage=1,this.showFilter=!1,this.isLoading=!1,this.displayedColumns=["index","id","loadingLocation","deliveryLocation","sendDate","isSafe","transport_type","offeredPrice"],this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.sortOptions={id:{column:"id",direction:null},loadingLocation:{column:"loadingLocation",direction:null},deliveryLocation:{column:"deliveryLocation",direction:null},cargoStatus:{column:"cargoStatus",direction:null},sendDate:{column:"sendDate",direction:null},offeredPrice:{column:"offeredPrice",direction:null},isSafe:{column:"isSafe",direction:null}}}ngOnInit(){this.getOrders()}getOrders(e,o,n){const u={size:this.size,currentPage:this.currentPage};this.isLoading=!0,(0,O.of)({filter:e,sortBy:o,sortType:n}).pipe((0,L.w)(({filter:d,sortBy:g,sortType:h})=>this.orderService.getWaitingOrders(u,d,g,h).pipe((0,S.U)(f=>({success:f.success,data:f.data,totalPagesCount:f.totalPagesCount})),(0,Y.K)(()=>(0,O.of)({success:!1,data:[],totalPagesCount:0}))))).subscribe({next:({success:d,data:g,totalPagesCount:h})=>{setTimeout(()=>{this.isLoading=!1},500),this.dataSource=d?g:[],this.totalPagesCount=h,this.dataSource.forEach(x=>{x.driverOffers&&Array.isArray(x.driverOffers)&&(x.driverOffers=x.driverOffers.filter(f=>!f.rejected))})},error:()=>{this.isLoading=!1,this.dataSource=[]}})}getStatuses(){}showOrderDetails(e){this.dialog.open(M,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(n=>{this.getOrders()})}onPaginationEvent(e){this.size=e.size,this.currentPage=e.page,this.getOrders()}generateFilterPath(e){let o="";for(const n in e)null!=e[n]&&(o+=`&${n}=${encodeURIComponent(e[n])}`);return this.getOrders(),o.length>0?o.substr(1):o}applyFilter(){this.filter&&(this.filterPath=this.generateFilterPath(this.filter),this.getOrders(this.filterPath,this.sortColumn,this.sortDirection))}resetSearch(){this.filter&&(this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.getOrders())}sortData(e){const o=this.sortOptions[e];o.direction=null===o.direction?"asc":"asc"===o.direction?"desc":null,this.sortColumn=e,this.sortDirection=o.direction,this.getOrders(this.filterPath,this.sortColumn,this.sortDirection)}getSortIcon(e){const o=this.sortOptions[e];return o.column===this.sortColumn&&"asc"===o.direction?"arrow_upward":o.column===this.sortColumn&&"desc"===o.direction?"arrow_downward":"unfold_more"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(U),t.Y36(F.e),t.Y36(v.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-available-orders"]],standalone:!0,features:[t.jDz],decls:62,vars:13,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent","p-4"],[1,"flex","justify-between","items-center","my-5"],[1,"text-3xl","font-bold"],[1,"flex","justify-end","gap-2"],["mat-flat-button","",1,"fuse-mat-button-large","dark","dark:bg-[#1E293BDB]",3,"color","click"],[1,"filter","flex","items-center","gap-2"],[1,"flex-auto"],["type","number","matInput","",3,"ngModel","ngModelChange"],["type","text","matInput","",3,"ngModel","ngModelChange"],[1,"mat-elevation-z8","my-6","relative"],["class","loading-shade",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","index"],["class","font-extrabold","mat-header-cell","",4,"matHeaderCellDef"],["class","relative","mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","font-extrabold cursor-pointer",3,"click",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","loadingLocation"],["mat-header-cell","","class","font-extrabold cursor-pointer truncate-cell",3,"click",4,"matHeaderCellDef"],["class","truncate-cell","mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","deliveryLocation"],["matColumnDef","sendDate"],["matColumnDef","isSafe"],["mat-header-cell","","class","font-extrabold",4,"matHeaderCellDef"],["matColumnDef","transport_type"],["mat-header-cell","","class","font-extrabold ",4,"matHeaderCellDef"],["matColumnDef","offeredPrice"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["class","flex justify-center p-5 font-bold text-lg text-slate-600 ",4,"ngIf"],[3,"totalPagesCount","size","currentPage","paginationEvent",4,"ngIf"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell","",1,"font-extrabold"],["mat-cell","",1,"relative"],["class","absolute inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-green-700 border-1 border-white rounded-full top-0 left-0 dark:border-gray-900",4,"ngIf"],[1,"absolute","inline-flex","items-center","justify-center","w-5","h-5","text-xs","font-bold","text-white","bg-green-700","border-1","border-white","rounded-full","top-0","left-0","dark:border-gray-900"],["mat-header-cell","",1,"font-extrabold","cursor-pointer",3,"click"],[1,"flex","justify-between","items-center"],["mat-cell",""],["mat-header-cell","",1,"font-extrabold","cursor-pointer","truncate-cell",3,"click"],["mat-cell","",1,"truncate-cell",3,"matTooltip"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"ngClass","click"],[1,"flex","justify-center","p-5","font-bold","text-lg","text-slate-600"],[3,"totalPagesCount","size","currentPage","paginationEvent"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.showFilter=!n.showFilter}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA(),t._uU(8," \u041f\u043e\u0438\u0441\u043a "),t.qZA()()(),t.TgZ(9,"div",5)(10,"div")(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"\u0413\u0440\u0443\u0437 ID"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("ngModelChange",function(a){return n.filter.id=a}),t.qZA()()(),t.TgZ(15,"div")(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(19,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.loadingLocation=a}),t.qZA()()(),t.TgZ(20,"div")(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(24,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.deliveryLocation=a}),t.qZA()()(),t.TgZ(25,"button",4),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(26,"mat-icon"),t._uU(27,"refresh"),t.qZA()(),t.TgZ(28,"button",4),t.NdJ("click",function(){return n.applyFilter()}),t.TgZ(29,"mat-icon"),t._uU(30,"search"),t.qZA()()(),t.TgZ(31,"div",9),t.YNc(32,Nt,2,1,"div",10),t.TgZ(33,"table",11),t.ynx(34,12),t.YNc(35,Ft,2,0,"th",13),t.YNc(36,Jt,4,2,"td",14),t.BQk(),t.ynx(37,15),t.YNc(38,It,6,1,"th",16),t.YNc(39,Pt,2,1,"td",17),t.BQk(),t.ynx(40,18),t.YNc(41,kt,6,1,"th",19),t.YNc(42,Lt,2,2,"td",20),t.BQk(),t.ynx(43,21),t.YNc(44,St,6,1,"th",19),t.YNc(45,Yt,2,2,"td",20),t.BQk(),t.ynx(46,22),t.YNc(47,Qt,6,1,"th",19),t.YNc(48,Bt,3,4,"td",17),t.BQk(),t.ynx(49,23),t.YNc(50,Mt,2,0,"th",24),t.YNc(51,jt,2,1,"td",17),t.BQk(),t.ynx(52,25),t.YNc(53,$t,2,0,"th",26),t.YNc(54,Kt,2,1,"td",17),t.BQk(),t.ynx(55,27),t.YNc(56,Gt,6,1,"th",16),t.YNc(57,Rt,2,1,"td",17),t.BQk(),t.YNc(58,Xt,1,0,"tr",28),t.YNc(59,Vt,1,4,"tr",29),t.qZA(),t.YNc(60,te,2,0,"div",30),t.YNc(61,ee,1,3,"app-pagination",31),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("color","primary"),t.xp6(4),t.Q6J("@showHideFilter",n.showFilter?"show":"hide"),t.xp6(5),t.Q6J("ngModel",n.filter.id),t.xp6(5),t.Q6J("ngModel",n.filter.loadingLocation),t.xp6(5),t.Q6J("ngModel",n.filter.deliveryLocation),t.xp6(1),t.Q6J("color","primary"),t.xp6(3),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!(null!=n.dataSource&&n.dataSource.length)),t.xp6(1),t.Q6J("ngIf",null==n.dataSource?null:n.dataSource.length))},dependencies:[Q.Q,T.AV,T.gM,C.c,C.Nt,_.KE,_.hX,D.LD,s.UX,s.Fj,s.wV,s.JJ,s.u5,s.On,m.uU,w.Cq,w.Ou,k.TU,_.lN,A.Ps,A.Hw,Z.ot,Z.lW,q.si,I.Tx,b.Nh,J.vV,P.X,m.ax,m.O5,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,m.mk],encapsulation:2,data:{animation:[(0,p.X$)("showHideFilter",[(0,p.SB)("show",(0,p.oB)({height:"*",opacity:1,visibility:"visible"})),(0,p.SB)("hide",(0,p.oB)({height:"0",opacity:0,visibility:"hidden"})),(0,p.eR)("show <=> hide",(0,p.jt)("300ms ease-in-out"))])]}})}return i})()},{path:"active",component:(()=>{class i{constructor(e,o,n,u){this.orderService=e,this.authService=o,this.dialog=n,this.sseService=u,this.totalPagesCount=1,this.size=5,this.currentPage=1,this.showFilter=!1,this.isLoading=!1,this.displayedColumns=["index","id","loadingLocation","deliveryLocation","sendDate","isSafe","transport_type","offeredPrice"],this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.sortOptions={id:{column:"id",direction:null},loadingLocation:{column:"loadingLocation",direction:null},deliveryLocation:{column:"deliveryLocation",direction:null},cargoStatus:{column:"cargoStatus",direction:null},sendDate:{column:"sendDate",direction:null},offeredPrice:{column:"offeredPrice",direction:null},isSafe:{column:"isSafe",direction:null}}}ngOnInit(){this.currentUser=(0,B.o)(this.authService.accessToken),this.getOrders(),this.sseSubscription=this.sseService.getUpdates().subscribe(e=>{("clientAcceptOffer"==e.type||"clientOffer"==e.type)&&this.getOrders()},e=>{console.error(e)})}getOrders(e,o,n){console.log("ok");const u={size:this.size,currentPage:this.currentPage};this.isLoading=!0,(0,O.of)({filter:e,sortBy:o,sortType:n}).pipe((0,L.w)(({filter:d,sortBy:g,sortType:h})=>this.orderService.getActiveOrders(this.currentUser.merchantId,u,d,g,h).pipe((0,S.U)(f=>({success:f.success,data:f.data,totalPagesCount:f.totalPagesCount})),(0,Y.K)(()=>(0,O.of)({success:!1,data:[],totalPagesCount:0}))))).subscribe({next:({success:d,data:g,totalPagesCount:h})=>{setTimeout(()=>{this.isLoading=!1},500),this.dataSource=d?g:[],this.totalPagesCount=h},error:()=>{this.isLoading=!1,this.dataSource=[]}})}getStatuses(){}showOrderDetails(e){this.dialog.open(M,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(n=>{this.getOrders()})}onPaginationEvent(e){this.size=e.size,this.currentPage=e.page,this.getOrders()}generateFilterPath(e){let o="";for(const n in e)null!=e[n]&&(o+=`&${n}=${encodeURIComponent(e[n])}`);return this.getOrders(),o.length>0?o.substr(1):o}applyFilter(){this.filter&&(this.filterPath=this.generateFilterPath(this.filter),this.getOrders(this.filterPath,this.sortColumn,this.sortDirection))}resetSearch(){this.filter&&(this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.getOrders())}sortData(e){const o=this.sortOptions[e];o.direction=null===o.direction?"asc":"asc"===o.direction?"desc":null,this.sortColumn=e,this.sortDirection=o.direction,this.getOrders(this.filterPath,this.sortColumn,this.sortDirection)}getSortIcon(e){const o=this.sortOptions[e];return o.column===this.sortColumn&&"asc"===o.direction?"arrow_upward":o.column===this.sortColumn&&"desc"===o.direction?"arrow_downward":"unfold_more"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(U),t.Y36(F.e),t.Y36(v.uw),t.Y36(R))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-active-orders"]],standalone:!0,features:[t.jDz],decls:62,vars:13,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent","p-4"],[1,"flex","justify-between","items-center","my-5"],[1,"text-3xl","font-bold"],[1,"flex","justify-end","gap-2"],["mat-flat-button","",1,"fuse-mat-button-large","dark","dark:bg-[#1E293BDB]",3,"color","click"],[1,"filter","flex","items-center","gap-2"],[1,"flex-auto"],["type","number","matInput","",3,"ngModel","ngModelChange"],["type","text","matInput","",3,"ngModel","ngModelChange"],[1,"mat-elevation-z8","my-6","relative"],["class","loading-shade",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","index"],["class","font-extrabold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","font-extrabold cursor-pointer",3,"click",4,"matHeaderCellDef"],["matColumnDef","loadingLocation"],["mat-header-cell","","class","font-extrabold cursor-pointer truncate-cell",3,"click",4,"matHeaderCellDef"],["class","truncate-cell","mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","deliveryLocation"],["matColumnDef","sendDate"],["matColumnDef","isSafe"],["mat-header-cell","","class","font-extrabold",4,"matHeaderCellDef"],["matColumnDef","transport_type"],["mat-header-cell","","class","font-extrabold ",4,"matHeaderCellDef"],["matColumnDef","offeredPrice"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["class","flex justify-center p-5 font-bold text-lg text-slate-600 ",4,"ngIf"],[3,"totalPagesCount","size","currentPage","paginationEvent",4,"ngIf"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell","",1,"font-extrabold"],["mat-cell",""],["class","absolute inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-green-700 border-1 border-white rounded-full top-0 left-0 dark:border-gray-900",4,"ngIf"],[1,"absolute","inline-flex","items-center","justify-center","w-5","h-5","text-xs","font-bold","text-white","bg-green-700","border-1","border-white","rounded-full","top-0","left-0","dark:border-gray-900"],["mat-header-cell","",1,"font-extrabold","cursor-pointer",3,"click"],[1,"flex","justify-between","items-center"],["mat-header-cell","",1,"font-extrabold","cursor-pointer","truncate-cell",3,"click"],["mat-cell","",1,"truncate-cell",3,"matTooltip"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"ngClass","click"],[1,"flex","justify-center","p-5","font-bold","text-lg","text-slate-600"],[3,"totalPagesCount","size","currentPage","paginationEvent"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.showFilter=!n.showFilter}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA(),t._uU(8," \u041f\u043e\u0438\u0441\u043a "),t.qZA()()(),t.TgZ(9,"div",5)(10,"div")(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"\u0413\u0440\u0443\u0437 ID"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("ngModelChange",function(a){return n.filter.id=a}),t.qZA()()(),t.TgZ(15,"div")(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(19,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.loadingLocation=a}),t.qZA()()(),t.TgZ(20,"div")(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(24,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.deliveryLocation=a}),t.qZA()()(),t.TgZ(25,"button",4),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(26,"mat-icon"),t._uU(27,"refresh"),t.qZA()(),t.TgZ(28,"button",4),t.NdJ("click",function(){return n.applyFilter()}),t.TgZ(29,"mat-icon"),t._uU(30,"search"),t.qZA()()(),t.TgZ(31,"div",9),t.YNc(32,oe,2,1,"div",10),t.TgZ(33,"table",11),t.ynx(34,12),t.YNc(35,re,2,0,"th",13),t.YNc(36,ae,4,2,"td",14),t.BQk(),t.ynx(37,15),t.YNc(38,le,6,1,"th",16),t.YNc(39,se,2,1,"td",14),t.BQk(),t.ynx(40,17),t.YNc(41,ce,6,1,"th",18),t.YNc(42,de,2,2,"td",19),t.BQk(),t.ynx(43,20),t.YNc(44,pe,6,1,"th",18),t.YNc(45,me,2,2,"td",19),t.BQk(),t.ynx(46,21),t.YNc(47,_e,6,1,"th",16),t.YNc(48,fe,3,4,"td",14),t.BQk(),t.ynx(49,22),t.YNc(50,ge,2,0,"th",23),t.YNc(51,he,2,1,"td",14),t.BQk(),t.ynx(52,24),t.YNc(53,ve,2,0,"th",25),t.YNc(54,Ae,2,1,"td",14),t.BQk(),t.ynx(55,26),t.YNc(56,Ce,6,1,"th",16),t.YNc(57,Te,2,1,"td",14),t.BQk(),t.YNc(58,be,1,0,"tr",27),t.YNc(59,De,1,4,"tr",28),t.qZA(),t.YNc(60,ye,2,0,"div",29),t.YNc(61,we,1,3,"app-pagination",30),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("color","primary"),t.xp6(4),t.Q6J("@showHideFilter",n.showFilter?"show":"hide"),t.xp6(5),t.Q6J("ngModel",n.filter.id),t.xp6(5),t.Q6J("ngModel",n.filter.loadingLocation),t.xp6(5),t.Q6J("ngModel",n.filter.deliveryLocation),t.xp6(1),t.Q6J("color","primary"),t.xp6(3),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!(null!=n.dataSource&&n.dataSource.length)),t.xp6(1),t.Q6J("ngIf",null==n.dataSource?null:n.dataSource.length))},dependencies:[Q.Q,T.AV,T.gM,C.c,C.Nt,_.KE,_.hX,D.LD,s.UX,s.Fj,s.wV,s.JJ,s.u5,s.On,m.uU,w.Cq,w.Ou,k.TU,_.lN,A.Ps,A.Hw,Z.ot,Z.lW,q.si,I.Tx,b.Nh,J.vV,P.X,m.ax,m.O5,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,m.mk],encapsulation:2,data:{animation:[(0,p.X$)("showHideFilter",[(0,p.SB)("show",(0,p.oB)({height:"*",opacity:1,visibility:"visible"})),(0,p.SB)("hide",(0,p.oB)({height:"0",opacity:0,visibility:"hidden"})),(0,p.eR)("show <=> hide",(0,p.jt)("300ms ease-in-out"))])]}})}return i})()},{path:"archived",component:(()=>{class i{constructor(e,o,n){this.orderService=e,this.authService=o,this.dialog=n,this.totalPagesCount=1,this.size=5,this.currentPage=1,this.showFilter=!1,this.isLoading=!1,this.displayedColumns=["index","id","loadingLocation","deliveryLocation","sendDate","isSafe","transport_type","offeredPrice"],this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.sortOptions={id:{column:"id",direction:null},loadingLocation:{column:"loadingLocation",direction:null},deliveryLocation:{column:"deliveryLocation",direction:null},cargoStatus:{column:"cargoStatus",direction:null},sendDate:{column:"sendDate",direction:null},offeredPrice:{column:"offeredPrice",direction:null},isSafe:{column:"isSafe",direction:null}}}ngOnInit(){this.currentUser=(0,B.o)(this.authService.accessToken),this.getOrders()}getOrders(e,o,n){const u={size:this.size,currentPage:this.currentPage};this.isLoading=!0,(0,O.of)({filter:e,sortBy:o,sortType:n}).pipe((0,L.w)(({filter:d,sortBy:g,sortType:h})=>this.orderService.getArchiveOrders(this.currentUser.merchantId,u,d,g,h).pipe((0,S.U)(f=>({success:f.success,data:f.data,totalPagesCount:f.totalPagesCount})),(0,Y.K)(()=>(0,O.of)({success:!1,data:[],totalPagesCount:0}))))).subscribe({next:({success:d,data:g,totalPagesCount:h})=>{setTimeout(()=>{this.isLoading=!1},500),this.dataSource=d?g:[],this.totalPagesCount=h,this.dataSource.forEach(x=>{x.driverOffers&&Array.isArray(x.driverOffers)&&(x.driverOffers=x.driverOffers.filter(f=>!f.rejected))})},error:()=>{this.isLoading=!1,this.dataSource=[]}})}getStatuses(){}showOrderDetails(e){this.dialog.open(M,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(n=>{this.getOrders()})}onPaginationEvent(e){this.size=e.size,this.currentPage=e.page,this.getOrders()}generateFilterPath(e){let o="";for(const n in e)null!=e[n]&&(o+=`&${n}=${encodeURIComponent(e[n])}`);return this.getOrders(),o.length>0?o.substr(1):o}applyFilter(){this.filter&&(this.filterPath=this.generateFilterPath(this.filter),this.getOrders(this.filterPath,this.sortColumn,this.sortDirection))}resetSearch(){this.filter&&(this.filter={id:null,loadingLocation:null,deliveryLocation:null,sendDate:null,secure_transaction:null,transport_type:null,offeredPrice:null},this.getOrders())}sortData(e){const o=this.sortOptions[e];o.direction=null===o.direction?"asc":"asc"===o.direction?"desc":null,this.sortColumn=e,this.sortDirection=o.direction,this.getOrders(this.filterPath,this.sortColumn,this.sortDirection)}getSortIcon(e){const o=this.sortOptions[e];return o.column===this.sortColumn&&"asc"===o.direction?"arrow_upward":o.column===this.sortColumn&&"desc"===o.direction?"arrow_downward":"unfold_more"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(U),t.Y36(F.e),t.Y36(v.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-archived-orders"]],standalone:!0,features:[t.jDz],decls:62,vars:13,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent","p-4"],[1,"flex","justify-between","items-center","my-5"],[1,"text-3xl","font-bold"],[1,"flex","justify-end","gap-2"],["mat-flat-button","",1,"fuse-mat-button-large","dark","dark:bg-[#1E293BDB]",3,"color","click"],[1,"filter","flex","items-center","gap-2"],[1,"flex-auto"],["type","number","matInput","",3,"ngModel","ngModelChange"],["type","text","matInput","",3,"ngModel","ngModelChange"],[1,"mat-elevation-z8","my-6","relative"],["class","loading-shade",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","index"],["class","font-extrabold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","font-extrabold cursor-pointer",3,"click",4,"matHeaderCellDef"],["matColumnDef","loadingLocation"],["mat-header-cell","","class","font-extrabold cursor-pointer truncate-cell",3,"click",4,"matHeaderCellDef"],["class","truncate-cell","mat-cell","",3,"matTooltip",4,"matCellDef"],["matColumnDef","deliveryLocation"],["matColumnDef","sendDate"],["matColumnDef","isSafe"],["mat-header-cell","","class","font-extrabold",4,"matHeaderCellDef"],["matColumnDef","transport_type"],["mat-header-cell","","class","font-extrabold ",4,"matHeaderCellDef"],["matColumnDef","offeredPrice"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["class","flex justify-center p-5 font-bold text-lg text-slate-600 ",4,"ngIf"],[3,"totalPagesCount","size","currentPage","paginationEvent",4,"ngIf"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell","",1,"font-extrabold"],["mat-cell",""],["mat-header-cell","",1,"font-extrabold","cursor-pointer",3,"click"],[1,"flex","justify-between","items-center"],["mat-header-cell","",1,"font-extrabold","cursor-pointer","truncate-cell",3,"click"],["mat-cell","",1,"truncate-cell",3,"matTooltip"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"ngClass","click"],[1,"flex","justify-center","p-5","font-bold","text-lg","text-slate-600"],[3,"totalPagesCount","size","currentPage","paginationEvent"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u0437\u0430\u043a\u0430\u0437\u044b"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.showFilter=!n.showFilter}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA(),t._uU(8," \u041f\u043e\u0438\u0441\u043a "),t.qZA()()(),t.TgZ(9,"div",5)(10,"div")(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"\u0413\u0440\u0443\u0437 ID"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("ngModelChange",function(a){return n.filter.id=a}),t.qZA()()(),t.TgZ(15,"div")(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"\u041e\u0442\u043a\u0443\u0434\u0430"),t.qZA(),t.TgZ(19,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.loadingLocation=a}),t.qZA()()(),t.TgZ(20,"div")(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"\u041a\u0443\u0434\u0430"),t.qZA(),t.TgZ(24,"input",8),t.NdJ("ngModelChange",function(a){return n.filter.deliveryLocation=a}),t.qZA()()(),t.TgZ(25,"button",4),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(26,"mat-icon"),t._uU(27,"refresh"),t.qZA()(),t.TgZ(28,"button",4),t.NdJ("click",function(){return n.applyFilter()}),t.TgZ(29,"mat-icon"),t._uU(30,"search"),t.qZA()()(),t.TgZ(31,"div",9),t.YNc(32,Ne,2,1,"div",10),t.TgZ(33,"table",11),t.ynx(34,12),t.YNc(35,Fe,2,0,"th",13),t.YNc(36,Ee,2,1,"td",14),t.BQk(),t.ynx(37,15),t.YNc(38,Je,6,1,"th",16),t.YNc(39,Ie,2,1,"td",14),t.BQk(),t.ynx(40,17),t.YNc(41,Pe,6,1,"th",18),t.YNc(42,ke,2,2,"td",19),t.BQk(),t.ynx(43,20),t.YNc(44,Le,6,1,"th",18),t.YNc(45,Se,2,2,"td",19),t.BQk(),t.ynx(46,21),t.YNc(47,Ye,6,1,"th",16),t.YNc(48,Qe,3,4,"td",14),t.BQk(),t.ynx(49,22),t.YNc(50,Be,2,0,"th",23),t.YNc(51,Me,2,1,"td",14),t.BQk(),t.ynx(52,24),t.YNc(53,je,2,0,"th",25),t.YNc(54,ze,2,1,"td",14),t.BQk(),t.ynx(55,26),t.YNc(56,Ke,6,1,"th",16),t.YNc(57,Ge,2,1,"td",14),t.BQk(),t.YNc(58,Re,1,0,"tr",27),t.YNc(59,We,1,4,"tr",28),t.qZA(),t.YNc(60,Ve,2,0,"div",29),t.YNc(61,ti,1,3,"app-pagination",30),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("color","primary"),t.xp6(4),t.Q6J("@showHideFilter",n.showFilter?"show":"hide"),t.xp6(5),t.Q6J("ngModel",n.filter.id),t.xp6(5),t.Q6J("ngModel",n.filter.loadingLocation),t.xp6(5),t.Q6J("ngModel",n.filter.deliveryLocation),t.xp6(1),t.Q6J("color","primary"),t.xp6(3),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!(null!=n.dataSource&&n.dataSource.length)),t.xp6(1),t.Q6J("ngIf",null==n.dataSource?null:n.dataSource.length))},dependencies:[Q.Q,T.AV,T.gM,C.c,C.Nt,_.KE,_.hX,D.LD,s.UX,s.Fj,s.wV,s.JJ,s.u5,s.On,m.uU,w.Cq,w.Ou,k.TU,_.lN,A.Ps,A.Hw,Z.ot,Z.lW,q.si,I.Tx,b.Nh,J.vV,P.X,m.ax,m.O5,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,m.mk],encapsulation:2,data:{animation:[(0,p.X$)("showHideFilter",[(0,p.SB)("show",(0,p.oB)({height:"*",opacity:1,visibility:"visible"})),(0,p.SB)("hide",(0,p.oB)({height:"0",opacity:0,visibility:"hidden"})),(0,p.eR)("show <=> hide",(0,p.jt)("300ms ease-in-out"))])]}})}return i})()}]}]}}]);