"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[185],{5185:(ni,j,l)=>{l.r(j),l.d(j,{default:()=>ei});var P=l(2480),t=l(2223);let W=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-drivers"]],standalone:!0,features:[t.jDz],decls:1,vars:0,template:function(o,n){1&o&&t._UZ(0,"router-outlet")},dependencies:[P.Bz,P.lC],encapsulation:2})}return i})();var _=l(4755),a=l(9401),p=l(1728),f=l(9114),h=l(430),x=l(787),m=l(3627),S=l(3556),Z=l(1591),v=l(9609),C=l(8467),F=l(3276),U=l(3314),A=l(3617),T=l(7406),b=l(1217),N=l(6205),c=l(5580),Y=l(6012),w=l(4586),I=l(1292),tt=l(2621),y=l(2340),B=l(4004),et=l(3144);let q=(()=>{class i{constructor(e){this.http=e}getActiveDrivers(e,o,n,r,s){let d=`${y.O.apiUsers}/users/drivers/merchant-active-drivers?merchantId=${e}&pageSize=${o.size}&pageIndex=${o.currentPage}`;return n&&(d+=`&${n}`),r&&s&&(d+=`&sortBy=${r}&sortType=${s}`),this.http.get(d)}getArchivedDrivers(e,o,n,r,s){let d=`${y.O.apiUsers}/users/drivers/merchant-archive-drivers?merchantId=${e}&pageSize=${o.size}&pageIndex=${o.currentPage}`;return n&&(d+=`&${n}`),r&&s&&(d+=`&sortBy=${r}&sortType=${s}`),this.http.get(d)}getDriverByPhone(e){return this.http.get(y.O.apiUsers+"/users/drivers/driver-by-phone?phone="+e)}getActiveDriverById(e){return this.http.get(y.O.apiUsers+"/users/drivers/driver-by?id="+e.driver.id+"&userId="+e.userId)}getArchiveDriverById(e){return this.http.get(y.O.apiUsers+"/users/archive/get-by?userId="+e.driver.user.id)}createDriver(e){return this.http.post(y.O.apiUsers+"/users/drivers/register",e)}createTransport(e){return this.http.post(y.O.apiUsers+"/users/driver/transport",e)}getFile(e){return this.http.get(y.O.apiReferences+`/references/files/driver/${e}`,{responseType:"blob"}).pipe((0,B.U)(o=>URL.createObjectURL(o)))}static#t=this.\u0275fac=function(o){return new(o||i)(t.LFG(et.eN))};static#e=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var E=l(3648);function it(i,u){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function nt(i,u){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ot(i,u){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ut(i,u){if(1&i&&(t.TgZ(0,"mat-option",29),t._uU(1),t.TgZ(2,"span",12),t._uU(3,"\u0442\u043e\u043d\u043d\u0430"),t.qZA()()),2&i){const e=u.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",e," ")}}function rt(i,u){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw();t.Q6J("src",e.techPassportFrontFilePath,t.LSH)}}function at(i,u){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw();t.Q6J("src",e.techPassportBackFilePath,t.LSH)}}function st(i,u){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw();t.Q6J("src",e.goodsTransportationLicenseCardFilePath,t.LSH)}}let R=(()=>{class i{constructor(e,o,n,r,s,d,g){this.data=e,this.formBuilder=o,this.typesService=n,this.driverService=r,this.dialog=s,this.toastr=d,this.cdr=g,this.formData=new FormData,this.loadCapacityOptions=[17,18,19,20,21,22,23,24,25]}ngOnInit(){this.typesService.getTransportKinds().subscribe(e=>{e&&e.success&&(this.transportKinds=e.data)}),this.typesService.getTransportTypes().subscribe(e=>{e&&e.success&&(this.transportTypes=e.data)}),this.typesService.getCargoLoadingMethod().subscribe(e=>{e&&e.success&&(this.loadingMethod=e.data)}),this.form=this.formBuilder.group({driverId:[this.data.id],name:[null,[a.kI.required]],stateNumber:[null],transportKindIds:[null],transportTypeIds:[null],loadingMethodIds:[null],cubicCapacity:[null],loadCapacity:[null],isAdr:[!1],techPassportFrontFilePath:[null],techPassportBackFilePath:[null],goodsTransportationLicenseCardFilePath:[null]})}addTransport(){this.form.disable(),null==this.form.value.name||""==this.form.value.name?(this.form.enable(),this.toastr.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041c\u0430\u0440\u043a\u0430 \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430")):null==this.form.value.techPassportFrontFilePath||""==this.form.value.techPassportFrontFilePath?(this.form.enable(),this.toastr.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u043f\u0435\u0440\u0435\u0434\u0438)")):null==this.form.value.techPassportBackFilePath||""==this.form.value.techPassportBackFilePath?(this.form.enable(),this.toastr.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u0437\u0430\u0434\u0438)")):null==this.form.value.techPassportFrontFilePath||""==this.form.value.techPassportFrontFilePath?(this.form.enable(),this.toastr.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f \u043d\u0430 \u0433\u0440\u0443\u0437\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0443")):(this.formData.append("driverId",this.form.value.driverId),this.formData.append("name",this.form.value.name),this.formData.append("stateNumber",this.form.value.stateNumber),this.formData.append("cubicCapacity",this.form.value.cubicCapacity),this.formData.append("transportKindIds",JSON.stringify(this.form.value.transportKindIds)),this.formData.append("transportTypeIds",JSON.stringify(this.form.value.transportTypeIds)),this.formData.append("loadingMethodIds",JSON.stringify(this.form.value.loadingMethodIds)),this.formData.append("isAdr",this.form.value.isAdr),this.formData.append("loadCapacity",this.form.value.loadCapacity),this.driverService.createTransport(this.formData).subscribe(e=>{e&&e.success&&(this.form.enable(),this.dialog.closeAll(),this.toastr.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"))},e=>{this.form.enable(),this.toastr.error(e.error.message)}))}selectFile(e,o){const n=e.target.files[0];if(n){this.formData.append(o,n,(new Date).getTime().toString()+".jpg");const r=new FileReader;r.onload=()=>{this[o]=r.result,this.cdr.detectChanges()},r.readAsDataURL(n)}}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(a.qu),t.Y36(tt.K),t.Y36(q),t.Y36(c.uw),t.Y36(E._W),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-transport"]],standalone:!0,features:[t.jDz],decls:83,vars:26,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"mt-10","w-full",3,"formGroup"],[1,"grid","sm:grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex-auto","gt-xs:pr-3","md:w-72","sm:w-full"],["matInput","",3,"formControlName"],[1,"flex-auto"],["multiple","true",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"formControlName"],["matSuffix",""],[1,"flex","items-center"],[1,"flex","gap-4","mt-5"],[1,"w-32"],[1,"font-bold"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10","rounded-md"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["formControlName","techPassportFrontFilePath","id","front","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","front","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["class","object-fill w-full h-full",3,"src",4,"ngIf"],["formControlName","techPassportBackFilePath","id","back","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","back","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["formControlName","goodsTransportationLicenseCardFilePath","id","goodsTransportationLicenseCardFilePath","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","goodsTransportationLicenseCardFilePath","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-10",3,"color","click"],[3,"value"],[1,"object-fill","w-full","h-full",3,"src"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"form",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"\u041c\u0430\u0440\u043a\u0430 \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14,"\u0413\u043e\u0441. \u043d\u043e\u043c\u0435\u0440"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(19,"mat-select",9),t.YNc(20,it,2,2,"mat-option",10),t.qZA()(),t.TgZ(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(24,"mat-select",9),t.YNc(25,nt,2,2,"mat-option",10),t.qZA()(),t.TgZ(26,"mat-form-field",8)(27,"mat-label"),t._uU(28,"\u0412\u0438\u0434 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(29,"mat-select",9),t.YNc(30,ot,2,2,"mat-option",10),t.qZA()(),t.TgZ(31,"mat-form-field",6)(32,"mat-label"),t._uU(33,"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044a\u0435\u043c\u043d\u043e\u0441\u0442\u044c (\u0442.)"),t.qZA(),t.TgZ(34,"mat-select",11),t.YNc(35,ut,4,2,"mat-option",10),t.qZA()(),t.TgZ(36,"mat-form-field",6)(37,"mat-label"),t._uU(38,"\u041e\u0431\u044a\u0435\u043c"),t.qZA(),t._UZ(39,"input",7),t.TgZ(40,"span",12),t._uU(41,"m"),t.TgZ(42,"sup"),t._uU(43,"3"),t.qZA()()(),t.TgZ(44,"div",13)(45,"mat-checkbox",11),t._uU(46,"\u0410\u0414\u0420"),t.qZA()()(),t.TgZ(47,"div",14)(48,"div",15)(49,"mat-label",16),t._uU(50,"\u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u043f\u0435\u0440\u0435\u0434\u0438)"),t.qZA(),t.TgZ(51,"div",17),t._UZ(52,"div",18),t.TgZ(53,"div",19)(54,"div")(55,"input",20),t.NdJ("change",function(s){return n.selectFile(s,"techPassportFrontFilePath")}),t.qZA(),t.TgZ(56,"label",21),t._UZ(57,"mat-icon",22),t.qZA()()(),t.YNc(58,rt,1,1,"img",23),t.qZA()(),t.TgZ(59,"div",15)(60,"mat-label",16),t._uU(61,"\u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u0437\u0430\u0434\u0438)"),t.qZA(),t.TgZ(62,"div",17),t._UZ(63,"div",18),t.TgZ(64,"div",19)(65,"div")(66,"input",24),t.NdJ("change",function(s){return n.selectFile(s,"techPassportBackFilePath")}),t.qZA(),t.TgZ(67,"label",25),t._UZ(68,"mat-icon",22),t.qZA()()(),t.YNc(69,at,1,1,"img",23),t.qZA()(),t.TgZ(70,"div",15)(71,"mat-label",16),t._uU(72,"\u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f \u043d\u0430 \u0433\u0440\u0443\u0437\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0443"),t.qZA(),t.TgZ(73,"div",17),t._UZ(74,"div",18),t.TgZ(75,"div",19)(76,"div")(77,"input",26),t.NdJ("change",function(s){return n.selectFile(s,"goodsTransportationLicenseCardFilePath")}),t.qZA(),t.TgZ(78,"label",27),t._UZ(79,"mat-icon",22),t.qZA()()(),t.YNc(80,st,1,1,"img",23),t.qZA()()(),t.TgZ(81,"button",28),t.NdJ("click",function(){return n.addTransport()}),t._uU(82," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),t.qZA()()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("formControlName","name"),t.xp6(4),t.Q6J("formControlName","stateNumber"),t.xp6(4),t.Q6J("formControlName","transportTypeIds"),t.xp6(1),t.Q6J("ngForOf",n.transportTypes),t.xp6(4),t.Q6J("formControlName","transportKindIds"),t.xp6(1),t.Q6J("ngForOf",n.transportKinds),t.xp6(4),t.Q6J("formControlName","loadingMethodIds"),t.xp6(1),t.Q6J("ngForOf",n.loadingMethod),t.xp6(4),t.Q6J("formControlName","loadCapacity"),t.xp6(1),t.Q6J("ngForOf",n.loadCapacityOptions),t.xp6(4),t.Q6J("formControlName","cubicCapacity"),t.xp6(6),t.Q6J("formControlName","isAdr"),t.xp6(10),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.techPassportFrontFilePath),t.xp6(8),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.techPassportBackFilePath),t.xp6(8),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.goodsTransportationLicenseCardFilePath),t.xp6(1),t.Q6J("color","primary"))},dependencies:[c.Is,c.ZT,Y.QW,I.p9,I.oG,v.c,v.Nt,f.KE,f.hX,f.R9,x.LD,x.gD,b.ey,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.u5,w.D,C.Cq,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.lW,p.RK,b.si,b.wG,T.Tx,A.Nh,U.vV,N.X,_.ax,_.O5,m.p0],encapsulation:2})}return i})();var lt=l(9751);let ct=(()=>{class i{constructor(e){this.driverService=e}transform(e){return new lt.y(o=>{this.driverService.getFile(e).subscribe(n=>{o.next(n),o.complete()},n=>{o.error(n)})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(q,16))};static#e=this.\u0275pipe=t.Yjl({name:"fileFetch",type:i,pure:!0})}return i})();function dt(i,u){if(1&i&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function pt(i,u){if(1&i&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function mt(i,u){if(1&i&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function ft(i,u){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"img",17),t.NdJ("load",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.isLoading=!1)}),t.qZA(),t.BQk()}if(2&i){const e=u.ngIf;t.xp6(1),t.Q6J("src",e,t.LSH)}}function ht(i,u){1&i&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function gt(i,u){if(1&i&&(t.TgZ(0,"div",12)(1,"mat-label",13),t._uU(2,"\u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u043f\u0435\u0440\u0435\u0434\u0438)"),t.qZA(),t.TgZ(3,"div",14),t.YNc(4,ft,2,1,"ng-container",15),t.ALo(5,"async"),t.ALo(6,"fileFetch"),t.YNc(7,ht,2,0,"ng-template",null,16,t.W1O),t.qZA()()),2&i){const e=t.MAs(8),o=t.oxw().$implicit;t.xp6(4),t.Q6J("ngIf",t.lcZ(5,2,t.lcZ(6,4,o.techPassportFrontFilePath)))("ngIfElse",e)}}function _t(i,u){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"img",17),t.NdJ("load",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.isLoading=!1)}),t.qZA(),t.BQk()}if(2&i){const e=u.ngIf;t.xp6(1),t.Q6J("src",e,t.LSH)}}function vt(i,u){1&i&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function Ct(i,u){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"img",17),t.NdJ("load",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.isLoading=!1)}),t.qZA(),t.BQk()}if(2&i){const e=u.ngIf;t.xp6(1),t.Q6J("src",e,t.LSH)}}function Zt(i,u){1&i&&(t.TgZ(0,"div",18),t._UZ(1,"mat-spinner",19),t.qZA())}function Tt(i,u){if(1&i&&(t.TgZ(0,"mat-tab",5)(1,"div",6)(2,"div")(3,"p",7),t._uU(4,"\u041c\u0430\u0440\u043a\u0430 \u0422\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(5,"p",8),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"p",7),t._uU(9,"\u0413\u043e\u0441. \u043d\u043e\u043c\u0435\u0440"),t.qZA(),t.TgZ(10,"p",8),t._uU(11),t.qZA()(),t.TgZ(12,"div")(13,"p",7),t._uU(14,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.YNc(15,dt,2,1,"p",9),t.qZA(),t.TgZ(16,"div")(17,"p",7),t._uU(18,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430 "),t.qZA(),t.YNc(19,pt,2,1,"p",9),t.qZA(),t.TgZ(20,"div")(21,"p",7),t._uU(22,"\u0412\u0438\u0434 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438 "),t.qZA(),t.YNc(23,mt,2,1,"p",9),t.qZA(),t.TgZ(24,"div")(25,"p",7),t._uU(26,"\u041e\u0431\u044a\u0435\u043c "),t.qZA(),t.TgZ(27,"p",8),t._uU(28),t.qZA()(),t.TgZ(29,"div")(30,"p",7),t._uU(31,"\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u0434\u044a\u0435\u043c\u043d\u043e\u0441\u0442\u044c "),t.qZA(),t.TgZ(32,"p",8),t._uU(33),t.qZA()(),t.TgZ(34,"div")(35,"p",7),t._uU(36,"\u0410\u0414\u0420 "),t.qZA(),t.TgZ(37,"p",8),t._uU(38),t.qZA()()(),t.TgZ(39,"div",10),t.YNc(40,gt,9,6,"div",11),t.TgZ(41,"div",12)(42,"mat-label",13),t._uU(43,"\u0422\u0435\u0445. \u043f\u0430\u0441\u043f\u043e\u0440\u0442 (\u0441\u0437\u0430\u0434\u0438)"),t.qZA(),t.TgZ(44,"div",14),t.YNc(45,_t,2,1,"ng-container",15),t.ALo(46,"async"),t.ALo(47,"fileFetch"),t.YNc(48,vt,2,0,"ng-template",null,16,t.W1O),t.qZA()(),t.TgZ(50,"div",12)(51,"mat-label",13),t._uU(52,"\u041b\u0438\u0446\u0435\u043d\u0437\u0438\u044f \u043d\u0430 \u0433\u0440\u0443\u0437\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0443"),t.qZA(),t.TgZ(53,"div",14),t.YNc(54,Ct,2,1,"ng-container",15),t.ALo(55,"async"),t.ALo(56,"fileFetch"),t.YNc(57,Zt,2,0,"ng-template",null,16,t.W1O),t.qZA()()()()),2&i){const e=u.$implicit,o=t.MAs(49);t.Q6J("label",e.name),t.xp6(6),t.Oqu(e.name),t.xp6(5),t.hij("",e.stateNumber," "),t.xp6(4),t.Q6J("ngForOf",e.transportTypes),t.xp6(4),t.Q6J("ngForOf",e.transportKinds),t.xp6(4),t.Q6J("ngForOf",e.cargoLoadMethods),t.xp6(5),t.hij("",e.cubicCapacity?e.cubicCapacity+" (m3)":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"," "),t.xp6(5),t.hij("",e.loadCapacity?e.loadCapacity+" (\u0442\u043e\u043d\u043d\u0430)":"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"," "),t.xp6(5),t.hij("",e.isAdr?"\u0414\u0430":"\u041d\u0435\u0442"," "),t.xp6(2),t.Q6J("ngIf",e.techPassportFrontFilePath),t.xp6(5),t.Q6J("ngIf",t.lcZ(46,14,t.lcZ(47,16,e.techPassportBackFilePath)))("ngIfElse",o),t.xp6(9),t.Q6J("ngIf",t.lcZ(55,18,t.lcZ(56,20,e.goodsTransportationLicenseCardFilePath)))("ngIfElse",o)}}let bt=(()=>{class i{constructor(e,o,n,r){this.data=e,this.dialogRef=o,this.dialog=n,this.toastr=r}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(c.so),t.Y36(c.uw),t.Y36(E._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-transport-detail"]],standalone:!0,features:[t.jDz],decls:8,vars:1,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[1,"grid","grid-cols-2","gap-4","mt-5"],[1,"text-lg","mb-1"],[1,"font-bold"],["class","font-bold",4,"ngFor","ngForOf"],[1,"grid","grid-cols-2","gap-3","mt-5","w-full"],["class","w-auto",4,"ngIf"],[1,"w-auto"],[1,"font-bold","p-2"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","p-2"],[4,"ngIf","ngIfElse"],["loading",""],[1,"object-fill","w-full","h-full",3,"src","load"],[1,"absolute","inset-0","flex","items-center","justify-center"],["diameter","32"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-tab-group"),t.YNc(7,Tt,59,22,"mat-tab",4),t.qZA()),2&o&&(t.xp6(7),t.Q6J("ngForOf",n.data.driverTransports))},dependencies:[_.ez,_.sg,_.O5,_.Ov,m.p0,c.Is,c.ZT,Y.QW,v.c,f.hX,x.LD,a.UX,a.u5,w.D,ct,C.Cq,C.Ou,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.RK,b.si,T.Tx,A.Nh,A.uX,A.SP,U.vV,N.X],styles:[".mat-mdc-tab-group .mat-mdc-tab-body-content{padding:10px 0!important}\n"],encapsulation:2})}return i})();var M=l(5656),O=l(6403);function xt(i,u){if(1&i&&(t.TgZ(0,"div")(1,"p",7),t._uU(2,"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),t.qZA(),t.TgZ(3,"p",8),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.data.phoneNumbers[0].phoneNumber," ")}}function At(i,u){if(1&i&&(t.TgZ(0,"div",15)(1,"div",16),t._uU(2,"\u0417\u0430\u043a\u0430\u0437\u044b"),t.qZA(),t.TgZ(3,"div",17)(4,"div")(5,"span",18),t._uU(6,"\u0412\u0441\u0435\u0433\u043e:"),t.qZA(),t.TgZ(7,"span",8),t._uU(8),t.qZA()(),t.TgZ(9,"div")(10,"span",18),t._uU(11,"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u044b\u0435:"),t.qZA(),t.TgZ(12,"span",8),t._uU(13),t.qZA()(),t.TgZ(14,"div")(15,"span",18),t._uU(16,"\u041e\u0442\u043c\u0435\u043d\u0435\u043d\u043d\u044b\u0435:"),t.qZA(),t.TgZ(17,"span",8),t._uU(18),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(8),t.Oqu(e.data.isBusy?e.data.completedOrdersCount+e.data.canceledOrdersCount+1:e.data.completedOrdersCount+e.data.canceledOrdersCount),t.xp6(5),t.hij("",e.data.completedOrdersCount," "),t.xp6(5),t.Oqu(e.data.canceledOrdersCount)}}function Dt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.detailTransport())}),t._uU(1," \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u044b "),t.qZA()}2&i&&t.Q6J("color","primary")}function yt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addTransport())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442 "),t.qZA()}2&i&&t.Q6J("color","primary")}function Ft(i,u){if(1&i&&(t.TgZ(0,"div",5)(1,"div",6)(2,"div")(3,"p",7),t._uU(4,"\u0418\u043c\u044f"),t.qZA(),t.TgZ(5,"p",8),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"p",7),t._uU(9,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),t.qZA(),t.TgZ(10,"p",8),t._uU(11),t.qZA()(),t.YNc(12,xt,5,1,"div",9),t.TgZ(13,"div")(14,"p",7),t._uU(15,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),t.qZA(),t.TgZ(16,"p",8),t._uU(17,"5.00 "),t.qZA()(),t.TgZ(18,"div")(19,"p",7),t._uU(20,"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),t.qZA(),t.TgZ(21,"p",8),t._uU(22),t.ALo(23,"dateFormat"),t.qZA()(),t.TgZ(24,"div")(25,"p",7),t._uU(26,"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430"),t.qZA(),t.TgZ(27,"p",8),t._uU(28),t.ALo(29,"dateFormat"),t.qZA()(),t.TgZ(30,"div")(31,"p",7),t._uU(32,"\u0421\u0442\u0430\u0442\u0443\u0441"),t.qZA(),t.TgZ(33,"p",10),t._uU(34),t.qZA()()(),t.YNc(35,At,19,3,"div",11),t.TgZ(36,"div",12),t.YNc(37,Dt,2,1,"button",13),t.YNc(38,yt,4,1,"button",14),t.qZA()()),2&i){const e=t.oxw();t.xp6(6),t.Oqu(e.data.firstName),t.xp6(5),t.hij(" ",e.data.lastName," "),t.xp6(1),t.Q6J("ngIf",e.data.phoneNumbers),t.xp6(10),t.hij("",t.xi3(23,10,e.data.createdAt,!1)," "),t.xp6(6),t.hij("",e.data.subscribedAt?t.xi3(29,13,e.data.subscribedAt,!1):"\u041d\u0435\u0442"," "),t.xp6(5),t.Q6J("ngClass",e.data.isBusy?"text-red-500":"text-green-500"),t.xp6(1),t.hij("",e.data.isBusy?"\u0417\u0430\u043d\u044f\u0442\u044c":"\u0421\u0432\u043e\u0431\u043e\u0434\u0435\u043d"," "),t.xp6(1),t.Q6J("ngIf",!e.driver.deleted),t.xp6(2),t.Q6J("ngIf",e.data.driverTransports&&0!==e.data.driverTransports.length),t.xp6(1),t.Q6J("ngIf",!e.data.deleted)}}let L=(()=>{class i{constructor(e,o,n,r,s){this.driver=e,this.dialogRef=o,this.dialog=n,this.toastr=r,this.driversService=s}ngOnInit(){this.currentUser=(0,M.o)(localStorage.getItem("tmc")),this.getDriver()}getDriver(){let e={driver:this.driver,userId:this.currentUser.userId};this.driver.deleted?this.driversService.getArchiveDriverById(e).subscribe(o=>{o&&o.success&&(this.data=o.data.driver)}):this.driversService.getActiveDriverById(e).subscribe(o=>{o&&o.success&&(this.data=o.data)})}addTransport(){this.dialogRef.close(),this.dialog.open(R,{height:"100vh",autoFocus:!1,disableClose:!0,data:this.data,position:{top:"0",right:"0"}}).afterClosed().subscribe(o=>{})}detailTransport(){this.dialogRef.close(),this.dialog.open(bt,{height:"100vh",autoFocus:!1,disableClose:!0,data:this.data,position:{top:"0",right:"0"}}).afterClosed().subscribe(o=>{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(c.so),t.Y36(c.uw),t.Y36(E._W),t.Y36(q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-driver-detail"]],standalone:!0,features:[t.jDz],decls:7,vars:1,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],["class","max-w-md mx-auto h-full mt-3 ",4,"ngIf"],[1,"max-w-md","mx-auto","h-full","mt-3"],[1,"grid","grid-cols-2","gap-4"],[1,"text-lg","mb-1"],[1,"font-bold"],[4,"ngIf"],[1,"font-bold",3,"ngClass"],["class","p-4 mt-4 border border-[#EFEFEF] rounded-md",4,"ngIf"],[1,"flex","gap-4"],["class","fuse-mat-button-large dark w-full bg-[#FF7100FF] mt-10","mat-flat-button","",3,"color","click",4,"ngIf"],["class","fuse-mat-button-large  dark w-full mt-10","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"p-4","mt-4","border","border-[#EFEFEF]","rounded-md"],[1,"font-bold","text-xl","mb-2"],[1,"flex","justify-between","gap-4"],[1,"text-lg","mr-1"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","bg-[#FF7100FF]","mt-10",3,"color","click"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-10",3,"color","click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0412\u043e\u0434\u0438\u0442\u0435\u043b\u0435"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.YNc(6,Ft,39,16,"div",4)),2&o&&(t.xp6(6),t.Q6J("ngIf",n.data))},dependencies:[c.Is,c.ZT,Y.QW,v.c,x.LD,a.UX,a.u5,w.D,O.E,C.Cq,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.lW,p.RK,b.si,T.Tx,A.Nh,U.vV,N.X,_.O5,m.p0,_.mk],encapsulation:2})}return i})();var z=l(3649),H=l(5707),$=l(1848);let Ut=(()=>{class i{constructor(e){this.dialog=e,this.confirmResponse=new t.vpe}ngOnInit(){}confirm(e){this.confirmResponse.emit(e),this.dialog.closeAll()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm"]],outputs:{confirmResponse:"confirmResponse"},standalone:!0,features:[t.jDz],decls:10,vars:0,consts:[[1,"text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-20","h-20","text-red-600","mx-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-bold","text-center","text-xl","my-6"],[1,"flex","justify-center","gap-3"],["id","confirm-delete-btn",1,"w-auto","inline-block","px-4","py-2","bg-red-200","text-red-700","rounded-lg","font-semibold","text-sm",3,"click"],["id","confirm-cancel-btn",1,"w-auto","inline-block","rounded-lg","font-semibold","text-sm",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2),t.qZA()(),t.kcU(),t.TgZ(3,"p",3),t._uU(4,"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0435\u043b\u0438 \u0431\u044b \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c?"),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return n.confirm(!0)}),t._uU(7," \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c "),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return n.confirm(!1)}),t._uU(9," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),t.qZA()())},dependencies:[h.Ps,A.Nh,w.D,f.lN,v.c,x.LD,a.u5,a.UX,$.te,c.Is,H.y4,p.ot,z.AV],styles:[".confirm-dialog[_ngcontent-%COMP%]{transition:opacity .3s ease,transform .3s ease}.confirm-dialog.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.confirm-dialog.hide[_ngcontent-%COMP%]{opacity:0;transform:translateY(50%)}"]})}return i})();var K=l(1274);function Nt(i,u){1&i&&t._UZ(0,"mat-icon",15),2&i&&t.Q6J("svgIcon","heroicons_solid:eye")}function wt(i,u){1&i&&t._UZ(0,"mat-icon",15),2&i&&t.Q6J("svgIcon","heroicons_solid:eye-slash")}const qt=function(){return["uz"]},Et=function(){return["uz","kz","tj","kg","ru","af"]};let Jt=(()=>{class i{ngOnInit(){this.form=this.formBuilder.group({firstName:[this.data.firstName,a.kI.required],lastName:[this.data.lastName,a.kI.required],phoneNumber:[this.data.phoneNumbers[0].phoneNumber,a.kI.required],password:[null,a.kI.required]})}constructor(e,o,n,r){this.formBuilder=e,this.data=o,this.dialog=n,this.toastr=r}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(a.qu),t.Y36(c.WI),t.Y36(c.uw),t.Y36(E._W))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-driver-edit"]],standalone:!0,features:[t.jDz],decls:29,vars:10,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"max-w-md","mx-auto","mt-3"],[3,"formGroup"],[1,"w-full"],["type","text","formControlName","firstName","matInput",""],["type","text","formControlName","lastName","matInput",""],["name","phoneNumber",3,"formControlName","preferredCountries","onlyCountries"],["phone",""],["matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"]],template:function(o,n){if(1&o){const r=t.EpF();t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"div",4)(7,"form",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"\u0418\u043c\u044f"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field",6)(17,"mat-label"),t._uU(18,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),t.qZA(),t._UZ(19,"ngx-mat-intl-tel-input",9,10),t.qZA(),t.TgZ(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"\u041f\u0430\u0440\u043e\u043b\u044c"),t.qZA(),t._UZ(24,"input",11,12),t.TgZ(26,"button",13),t.NdJ("click",function(){t.CHM(r);const d=t.MAs(25);return t.KtG(d.type="password"===d.type?"text":"password")}),t.YNc(27,Nt,1,1,"mat-icon",14),t.YNc(28,wt,1,1,"mat-icon",14),t.qZA()()()()}if(2&o){const r=t.MAs(25);t.xp6(2),t.hij("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c: ID #",n.data.id,""),t.xp6(5),t.Q6J("formGroup",n.form),t.xp6(12),t.Q6J("formControlName","phoneNumber")("preferredCountries",t.DdM(8,qt))("onlyCountries",t.DdM(9,Et)),t.xp6(5),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===r.type),t.xp6(1),t.Q6J("ngIf","text"===r.type)}},dependencies:[K.d,c.Is,c.ZT,v.c,v.Nt,f.KE,f.hX,f.R9,x.LD,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.u5,C.Cq,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.RK,b.si,T.Tx,A.Nh,U.vV,N.X,_.O5,m.p0],encapsulation:2})}return i})();var k=l(9646),G=l(3900),X=l(262),It=l(3844),kt=l(8657),V=l(1709),Q=l(8951);let Qt=(()=>{class i{constructor(e,o,n){this.data=e,this.dialog=o,this.dialogRef=n}ngOnInit(){console.log(this.data)}confirm(e){e?(this.dialogRef.close(),this.dialog.open(R,{height:"100vh",autoFocus:!1,disableClose:!0,data:this.data,position:{top:"0",right:"0"}}).afterClosed().subscribe(n=>{})):this.dialog.closeAll()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(c.uw),t.Y36(c.so))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-confirm-add-transport"]],standalone:!0,features:[t.jDz],decls:7,vars:0,consts:[[1,"font-bold","text-center","text-xl","my-6"],[1,"flex","justify-center","gap-3"],["id","confirm-cancel-btn",1,"w-auto","inline-block","rounded-lg","font-semibold","text-sm",3,"click"],["id","confirm-delete-btn",1,"w-auto","inline-block","px-4","py-2","bg-green-600","text-white","rounded-lg","font-semibold","text-sm",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"p",0),t._uU(1,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f ?"),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return n.confirm(!1)}),t._uU(4," \u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c "),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.confirm(!0)}),t._uU(6," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),t.qZA()())},dependencies:[h.Ps,A.Nh,w.D,f.lN,v.c,x.LD,a.u5,a.UX,$.te,c.Is,H.y4,p.ot,z.AV]})}return i})();function Pt(i,u){1&i&&t._UZ(0,"mat-icon",29),2&i&&t.Q6J("svgIcon","heroicons_solid:eye")}function Yt(i,u){1&i&&t._UZ(0,"mat-icon",29),2&i&&t.Q6J("svgIcon","heroicons_solid:eye-slash")}function Bt(i,u){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw();t.Q6J("src",e.passport,t.LSH)}}function Mt(i,u){if(1&i&&t._UZ(0,"img",30),2&i){const e=t.oxw();t.Q6J("src",e.driverLicense,t.LSH)}}function Ot(i,u){1&i&&(t.TgZ(0,"span"),t._uU(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),t.qZA())}function jt(i,u){1&i&&t._UZ(0,"mat-progress-spinner",31),2&i&&t.Q6J("diameter",24)("mode","indeterminate")}let St=(()=>{class i{constructor(e,o,n,r,s,d,g){this.data=e,this.dialogRef=o,this.driverService=n,this.toastr=r,this.formBuilder=s,this.cdr=d,this.dialog=g,this.formData=new FormData,this.showConfirm=!1}ngOnInit(){this.form=this.formBuilder.group({firstName:[null,a.kI.required],lastName:[null,a.kI.required],phoneNumbers:this.formBuilder.array([this.data.phone],a.kI.required),email:[null,a.kI.required],citizenship:[null,a.kI.required],password:[null,a.kI.required],driverLicense:[null,a.kI.required],passport:[null,a.kI.required]})}submit(){this.form.disable(),null===this.form.value.firstName||""===this.form.value.firstName?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0418\u043c\u044f")):null===this.form.value.lastName||""===this.form.value.lastName?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0424\u0430\u043c\u0438\u043b\u0438\u044f")):null===this.form.value.phoneNumbers||""===this.form.value.phoneNumbers?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")):null===this.form.value.password||""===this.form.value.password?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")):null===this.form.value.driverLicense||""===this.form.value.driverLicense?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u043f\u0440\u0430\u0432\u0430")):null===this.form.value.passport||""===this.form.value.passport?(this.form.enable(),this.toastr.error("\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u041f\u0430\u0441\u043f\u043e\u0440\u0442")):(this.formData.append("firstName",this.form.value.firstName),this.formData.append("lastName",this.form.value.lastName),this.formData.append("phoneNumbers",JSON.stringify(this.form.value.phoneNumbers)),this.formData.append("password",this.form.value.password),this.driverService.createDriver(this.formData).subscribe(e=>{e&&e.success&&(this.dialog.closeAll(),this.addTransport(e.data),this.form.enable(),this.toastr.success("\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044c"))},e=>{"duplicateError"==e.error.message?(this.form.enable(),this.toastr.error("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438\u043c\u0435\u0435\u0442 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0435")):(this.form.enable(),this.toastr.error(e.error.message))}))}selectFile(e,o){const n=e.target.files[0];if(n){this.formData.append(o,n,(new Date).getTime().toString()+".jpg");const r=new FileReader;r.onload=()=>{this[o]=r.result,this.cdr.detectChanges()},r.readAsDataURL(n)}}addTransport(e){this.dialogRef.close(),this.dialog.open(Qt,{autoFocus:!1,disableClose:!0,data:e}).afterClosed().subscribe(n=>{})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(c.so),t.Y36(q),t.Y36(E._W),t.Y36(a.qu),t.Y36(t.sBO),t.Y36(c.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-driver"]],standalone:!0,features:[t.jDz],decls:54,vars:20,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"mt-8","w-full","overflow-y-scroll",3,"formGroup"],[1,"grid","sm:grid-cols-1","md:grid-cols-2","gap-4","overflow-y-scroll"],[1,"flex-auto","gt-xs:pr-3","md:w-72","sm:w-full"],["matInput","",3,"formControlName"],[1,"w-full"],["matInput","",3,"formControlName","readonly"],["matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","items-end","gap-4"],[1,"w-32"],[1,"font-bold"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10","rounded-md"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["formControlName","passport","id","avatar-file-input1","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","avatar-file-input1","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["class","object-fill w-full h-full",3,"src",4,"ngIf"],["formControlName","driverLicense","id","avatar-file-input2","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","avatar-file-input2","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-10",3,"color","disabled","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"object-fill","w-full","h-full",3,"src"],[3,"diameter","mode"]],template:function(o,n){if(1&o){const r=t.EpF();t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"form",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"\u0418\u043c\u044f"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),t.qZA(),t._UZ(19,"input",9),t.qZA(),t.TgZ(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"\u041f\u0430\u0440\u043e\u043b\u044c"),t.qZA(),t._UZ(23,"input",10,11),t.TgZ(25,"button",12),t.NdJ("click",function(){t.CHM(r);const d=t.MAs(24);return t.KtG(d.type="password"===d.type?"text":"password")}),t.YNc(26,Pt,1,1,"mat-icon",13),t.YNc(27,Yt,1,1,"mat-icon",13),t.qZA()()(),t.TgZ(28,"div",14)(29,"div",15)(30,"mat-label",16),t._uU(31,"\u041f\u0430\u0441\u043f\u043e\u0440\u0442"),t.qZA(),t.TgZ(32,"div",17),t._UZ(33,"div",18),t.TgZ(34,"div",19)(35,"div")(36,"input",20),t.NdJ("change",function(d){return n.selectFile(d,"passport")}),t.qZA(),t.TgZ(37,"label",21),t._UZ(38,"mat-icon",22),t.qZA()()(),t.YNc(39,Bt,1,1,"img",23),t.qZA()(),t.TgZ(40,"div",15)(41,"mat-label",16),t._uU(42,"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u043f\u0440\u0430\u0432\u0430"),t.qZA(),t.TgZ(43,"div",17),t._UZ(44,"div",18),t.TgZ(45,"div",19)(46,"div")(47,"input",24),t.NdJ("change",function(d){return n.selectFile(d,"driverLicense")}),t.qZA(),t.TgZ(48,"label",25),t._UZ(49,"mat-icon",22),t.qZA()()(),t.YNc(50,Mt,1,1,"img",23),t.qZA()()(),t.TgZ(51,"button",26),t.NdJ("click",function(){return n.submit()}),t.YNc(52,Ot,2,0,"span",27),t.YNc(53,jt,1,2,"mat-progress-spinner",28),t.qZA()()}if(2&o){const r=t.MAs(24);t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(5),t.Q6J("formControlName","firstName"),t.xp6(4),t.Q6J("formControlName","lastName"),t.xp6(4),t.Q6J("formControlName","phoneNumbers")("readonly",n.form.value.phoneNumbers),t.xp6(4),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===r.type),t.xp6(1),t.Q6J("ngIf","text"===r.type),t.xp6(9),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.passport),t.xp6(8),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.driverLicense),t.xp6(1),t.Q6J("color","primary")("disabled",n.form.disabled),t.xp6(1),t.Q6J("ngIf",!n.form.disabled),t.xp6(1),t.Q6J("ngIf",n.form.disabled)}},dependencies:[c.Is,c.ZT,v.c,v.Nt,f.KE,f.hX,f.R9,x.LD,a.UX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,a.u5,C.Cq,C.Ou,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.lW,p.RK,b.si,b.wG,T.Tx,A.Nh,U.vV,N.X,_.O5,m.p0],styles:[".country-selector{opacity:1!important}ngx-mat-intl-tel-input div button{margin:4px 0}.form-container{height:400px;overflow-y:auto}.mat-mdc-dialog-container .mdc-dialog__surface{max-width:none!important}\n"],encapsulation:2})}return i})();function Rt(i,u){1&i&&(t.TgZ(0,"span"),t._uU(1,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),t.qZA())}function Lt(i,u){1&i&&t._UZ(0,"mat-progress-spinner",14),2&i&&t.Q6J("diameter",24)("mode","indeterminate")}let zt=(()=>{class i{constructor(e,o,n,r,s,d){this.data=e,this.cdr=o,this.dialogRef=n,this.router=r,this.dialog=s,this.driverService=d,this.authService=(0,t.f3M)(Q.e),this.toastr=(0,t.f3M)(E._W),this.loading=!1,this.countdown=119,this.isCodeExpired=!1,this.codeEntered=!1}ngOnInit(){this.smsCode=this.data.code,this.startCountdown()}sendVerifyedCode(){this.loading=!0,this.isCodeExpired?(this.loading=!1,this.toastr.error("\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f SMS-\u043a\u043e\u0434\u0430 \u0438\u0441\u0442\u0435\u043a. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439."),this.dialogRef.close()):this.smsCode!==this.verifyCode?(this.loading=!1,this.toastr.error("\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442")):this.smsCode==this.verifyCode&&this.authService.accessToken&&(console.log(this.data.phone),this.driverService.getDriverByPhone(this.data.phone.replace(/\+/g,"")).subscribe(e=>{e&&e.success&&e.data.driverMerchant?this.toastr.error("Driver have tmc"):this.dialog.open(St,{autoFocus:!1,disableClose:!0,data:this.data})}),this.dialogRef.close())}retrySms(){this.loading=!0,this.authService.verifyPhone({phone:this.data.phone,countryCode:this.data.countryCode}).subscribe(e=>{e.success&&(this.smsCode=e.data.code,this.loading=!1,this.isCodeExpired=!1,this.countdown=119,this.startCountdown())})}startCountdown(){this.intervalId=setInterval(()=>{this.countdown>=0?(this.formatTime(this.countdown),this.countdown--):(this.stopCountdown(),this.isCodeExpired=!0)},1e3)}stopCountdown(){clearInterval(this.intervalId)}formatTime(e){const o=Math.floor(e/60),n=e%60;this.count=`${"0"+o}:${n<10?"0":""}${n}`,this.cdr.detectChanges()}closeModal(){this.dialogRef.close()}onCodeChanged(e){this.codeEntered=6==e.length,this.verifyCode=e}onCodeCompleted(e){this.sendVerifyedCode()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.WI),t.Y36(t.sBO),t.Y36(c.so),t.Y36(P.F0),t.Y36(c.uw),t.Y36(q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["driver-verification-code"]],standalone:!0,features:[t.jDz],decls:21,vars:9,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"mat-typography","m-auto"],[1,"flex","justify-center"],[1,"text-black","flex","justify-center","mb-4"],[3,"disabled","isCodeHidden","codeLength","codeChanged","codeCompleted"],["align","center"],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-6",3,"disabled","color","click"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"inline-flex","items-center","justify-between","w-full","mt-4"],["disabled","loading",1,"text-md","font-medium","m-auto","cursor-pointer",3,"click"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u041f\u041e\u0414\u0422\u0412\u0415\u0420\u0416\u0414\u0415\u041d\u0418\u0415"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-dialog-content",4)(7,"div",5),t._uU(8,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 6 \u0437\u043d\u0430\u0447\u043d\u044b\u0439 \u043a\u043e\u0434 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043d\u0430 \u043d\u043e\u043c\u0435\u0440 "),t.qZA(),t.TgZ(9,"b",6),t._uU(10),t.qZA(),t.TgZ(11,"code-input",7),t.NdJ("codeChanged",function(s){return n.onCodeChanged(s)})("codeCompleted",function(s){return n.onCodeCompleted(s)}),t.qZA()(),t.TgZ(12,"mat-dialog-actions",8)(13,"div"),t._uU(14),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.sendVerifyedCode()}),t.YNc(16,Rt,2,0,"span",10),t.YNc(17,Lt,1,2,"mat-progress-spinner",11),t.qZA(),t.TgZ(18,"div",12)(19,"a",13),t.NdJ("click",function(){return n.retrySms()}),t._uU(20,"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"),t.qZA()()()),2&o&&(t.xp6(10),t.hij(" ",null==n.data?null:n.data.phone,""),t.xp6(1),t.Q6J("disabled",n.loading)("isCodeHidden",!1)("codeLength",6),t.xp6(3),t.Oqu(n.count?n.count:"01:59"),t.xp6(1),t.Q6J("disabled",n.loading||!n.codeEntered)("color","primary"),t.xp6(1),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("ngIf",n.loading))},dependencies:[V.oY,V.Oz,_.O5,C.Cq,C.Ou,p.ot,p.lW,p.RK,h.Ps,h.Hw,a.UX,a.u5,kt.Ky,I.p9,b.si,T.Tx,c.Is,c.ZT,c.xY,c.H8],styles:[".mat-mdc-dialog-container .mdc-dialog__surface{max-width:500px!important}\n"],encapsulation:2,changeDetection:0})}return i})();const Ht=["verifyPhoneNgForm"],$t=["phone"];function Kt(i,u){1&i&&(t.TgZ(0,"span"),t._uU(1,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),t.qZA())}function Gt(i,u){1&i&&t._UZ(0,"mat-progress-spinner",17),2&i&&t.Q6J("diameter",24)("mode","indeterminate")}const Xt=function(){return["uz"]},Vt=function(){return["uz","kz","tj","kg","ru","af"]};let Wt=(()=>{class i{constructor(e,o){this.formBuilder=e,this.dialog=o,this.toastr=(0,t.f3M)(E._W),this.authService=(0,t.f3M)(Q.e),this.phoneCountry=""}ngOnInit(){this.verifyPhoneForm=this.formBuilder.group({phone:["",[a.kI.required]],countryCode:["uz",[a.kI.required]]})}verifyPhone(){"INVALID"!=this.verifyPhoneForm.status||this.verifyPhoneForm.value.phone?(this.verifyPhoneForm.patchValue({countryCode:this.phone.selectedCountry.iso2}),this.verifyPhoneForm.disable(),this.authService.verifyPhone(this.verifyPhoneForm.value).subscribe(e=>{this.showVerifyCode(e.data),this.verifyPhoneForm.enable()})):this.toastr.error("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")}showVerifyCode(e){this.dialog.open(zt,{autoFocus:!1,disableClose:!0,data:{countryCode:this.phone.selectedCountry.iso2,phone:this.verifyPhoneForm.value.phone,code:e.code}}).afterClosed().subscribe(n=>{this.verifyPhoneForm.enable()})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(a.qu),t.Y36(c.uw))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["driver-verify-phone"]],viewQuery:function(o,n){if(1&o&&(t.Gf(Ht,5),t.Gf($t,5)),2&o){let r;t.iGM(r=t.CRH())&&(n.verifyPhoneNgForm=r.first),t.iGM(r=t.CRH())&&(n.phone=r.first)}},standalone:!0,features:[t.jDz],decls:20,vars:9,consts:[[1,"flex","justify-between","items-center"],[1,"font-bold","text-2xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"flex","justify-center","items-center","h-full","w-full"],[1,"login-contianer"],[1,"login-card"],[1,"mt-8",3,"formGroup","ngSubmit"],["verifyPhoneNgForm","ngForm"],[1,"form-width"],[1,"flex-auto","gt-xs:pr-3","md:w-72","sm:w-full","dark:bg-gray-800"],[1,"dark:text-white"],["formControlName","phone","name","phone",1,"dark:text-white",3,"preferredCountries","onlyCountries"],["phone",""],["mat-flat-button","",1,"fuse-mat-button-large","dark","w-full","mt-6",3,"color","disabled"],[4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"form",7,8),t.NdJ("ngSubmit",function(){return n.verifyPhone()}),t.TgZ(11,"div",9)(12,"mat-form-field",10)(13,"mat-label",11),t._uU(14,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),t.qZA(),t._UZ(15,"ngx-mat-intl-tel-input",12,13),t.qZA()(),t.TgZ(17,"button",14),t.YNc(18,Kt,2,0,"span",15),t.YNc(19,Gt,1,2,"mat-progress-spinner",16),t.qZA()()()()()),2&o&&(t.xp6(9),t.Q6J("formGroup",n.verifyPhoneForm),t.xp6(6),t.Q6J("preferredCountries",t.DdM(7,Xt))("onlyCountries",t.DdM(8,Vt)),t.xp6(2),t.Q6J("color","primary")("disabled",n.verifyPhoneForm.disabled),t.xp6(1),t.Q6J("ngIf",!n.verifyPhoneForm.disabled),t.xp6(1),t.Q6J("ngIf",n.verifyPhoneForm.disabled))},dependencies:[_.O5,a.u5,a._Y,a.JJ,a.JL,c.Is,c.ZT,a.UX,a.sg,a.u,f.lN,f.KE,f.hX,v.c,p.ot,p.lW,p.RK,h.Ps,h.Hw,I.p9,C.Cq,C.Ou,K.d],styles:[".country-selector{opacity:1!important}ngx-mat-intl-tel-input div button{margin:4px 0!important}\n"],encapsulation:2,data:{animation:It.L}})}return i})();function te(i,u){1&i&&t._UZ(0,"mat-spinner")}function ee(i,u){if(1&i&&(t.TgZ(0,"div",37),t.YNc(1,te,1,0,"mat-spinner",38),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function ie(i,u){1&i&&(t.TgZ(0,"th",39),t._uU(1," No "),t.qZA())}function ne(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.index;t.xp6(1),t.hij(" ",e+1," ")}}function oe(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("id"))}),t.TgZ(1,"div",42)(2,"div"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("id"))}}function ue(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function re(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("full_name"))}),t.TgZ(1,"div",42)(2,"div"),t._uU(3,"\u0424\u0418\u041e"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("full_name"))}}function ae(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.AsE("",e.lastName," ",e.firstName,"")}}function se(i,u){1&i&&(t.TgZ(0,"th",43),t._uU(1," \u0422\u0435\u043b\u0435\u0444\u043e\u043d "),t.qZA())}function le(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.phoneNumbers[0].phoneNumber," ")}}function ce(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("transport_kind"))}),t.TgZ(1,"div",42)(2,"div"),t._uU(3,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("transport_kind"))}}const de=function(){return[]};function pe(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.driverTransports==t.DdM(1,de)?e.driverTransports:"\u041d\u0435\u0442 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"," ")}}function me(i,u){1&i&&(t.TgZ(0,"th",39),t._uU(1," \u0421\u0442\u0430\u0442\u0443\u0441 "),t.qZA())}function fe(i,u){if(1&i&&(t.TgZ(0,"td",40)(1,"div",44),t._uU(2),t.qZA()()),2&i){const e=u.$implicit;t.xp6(1),t.Q6J("ngClass",e.isBusy?"bg-red-500":"bg-green-500"),t.xp6(1),t.hij(" ",e.isBusy?"\u0417\u0430\u043d\u044f\u0442\u044c":"\u0421\u0432\u043e\u0431\u043e\u0434\u0435\u043d"," ")}}function he(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("subscribe"))}),t.TgZ(1,"div",42)(2,"div"),t._uU(3,"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("subscribe"))}}function ge(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.subscribedAt?t.xi3(2,1,e.subscribedAt,!1):"\u041d\u0435\u0442"," ")}}function _e(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",41),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("offers"))}),t.TgZ(1,"div",42)(2,"div"),t._uU(3,"\u0420\u0430\u0437\u0440. \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("offers"))}}function ve(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.offers?"\u0414\u0430":"\u041d\u0435\u0442"," ")}}function Ce(i,u){1&i&&(t.TgZ(0,"th",39),t._uU(1," \u0413\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044f "),t.qZA())}function Ze(i,u){if(1&i&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.location?"\u0415\u0441\u0442\u044c \u0440\u0430\u0437\u0440.":"\u041d\u0435\u0442 \u0440\u0430\u0437\u0440."," ")}}function Te(i,u){1&i&&t._UZ(0,"th",39)}function be(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"td")(1,"div",45)(2,"button",46),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,47)(7,"button",48),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.showDetails(r))}),t._uU(8," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 "),t.qZA(),t.TgZ(9,"button",48),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.showEdit(r))}),t._uU(10," \u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c "),t.qZA()()()()}if(2&i){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}function xe(i,u){1&i&&t._UZ(0,"tr",49)}const Ae=function(i,u){return{"odd:bg-[#EFEFEF] dark:odd:bg-[#1E293BDB]":i,"even:bg-white dark:even:bg-[#1E293BDB]":u}};function De(i,u){if(1&i&&t._UZ(0,"tr",50),2&i){const e=u.$implicit;t.Q6J("ngClass",t.WLB(1,Ae,e,e))}}function ye(i,u){1&i&&(t.TgZ(0,"div",51),t._uU(1," \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 "),t.qZA())}function Fe(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"app-pagination",52),t.NdJ("paginationEvent",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onPaginationEvent(n))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("totalPagesCount",e.totalPagesCount)("size",e.size)("currentPage",e.currentPage)}}function Ne(i,u){1&i&&t._UZ(0,"mat-spinner")}function we(i,u){if(1&i&&(t.TgZ(0,"div",35),t.YNc(1,Ne,1,0,"mat-spinner",36),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function qe(i,u){1&i&&(t.TgZ(0,"th",37),t._uU(1," No "),t.qZA())}function Ee(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.index;t.xp6(1),t.hij(" ",e+1," ")}}function Je(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("id"))}),t.TgZ(1,"div",40)(2,"div"),t._uU(3,"ID"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("id"))}}function Ie(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function ke(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("full_name"))}),t.TgZ(1,"div",40)(2,"div"),t._uU(3,"\u0424\u0418\u041e"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("full_name"))}}function Qe(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.AsE("",e.lastName," ",e.firstName,"")}}function Pe(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("transport_kind"))}),t.TgZ(1,"div",40)(2,"div"),t._uU(3,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("transport_kind"))}}const Ye=function(){return[]};function Be(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.driverTransports==t.DdM(1,Ye)?e.driverTransports:"\u041d\u0435\u0442 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"," ")}}function Me(i,u){1&i&&(t.TgZ(0,"th",37),t._uU(1," \u0421\u0442\u0430\u0442\u0443\u0441 "),t.qZA())}function Oe(i,u){if(1&i&&(t.TgZ(0,"td",38)(1,"div",41),t._uU(2),t.qZA()()),2&i){const e=u.$implicit;t.xp6(1),t.Q6J("ngClass",e.isBusy?"bg-red-500":"bg-green-500"),t.xp6(1),t.hij(" ",e.isBusy?"\u0417\u0430\u043d\u044f\u0442\u044c":"\u0421\u0432\u043e\u0431\u043e\u0434\u0435\u043d"," ")}}function je(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("subscribe"))}),t.TgZ(1,"div",40)(2,"div"),t._uU(3,"\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("subscribe"))}}function Se(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.subscribedAt?t.xi3(2,1,e.subscribedAt,!1):"\u041d\u0435\u0442"," ")}}function Re(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"th",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.sortData("offers"))}),t.TgZ(1,"div",40)(2,"div"),t._uU(3,"\u0420\u0430\u0437\u0440. \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439"),t.qZA(),t.TgZ(4,"mat-icon"),t._uU(5),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.getSortIcon("offers"))}}function Le(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.offers?"\u0414\u0430":"\u041d\u0435\u0442"," ")}}function ze(i,u){1&i&&(t.TgZ(0,"th",37),t._uU(1," \u0413\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u044f "),t.qZA())}function He(i,u){if(1&i&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&i){const e=u.$implicit;t.xp6(1),t.hij(" ",e.location?"\u0415\u0441\u0442\u044c \u0440\u0430\u0437\u0440.":"\u041d\u0435\u0442 \u0440\u0430\u0437\u0440.","")}}function $e(i,u){1&i&&t._UZ(0,"th",37)}function Ke(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"td")(1,"div",42)(2,"button",43),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,44)(7,"button",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.showDetails(r))}),t._uU(8," \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 "),t.qZA()()()()}if(2&i){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e)}}function Ge(i,u){1&i&&t._UZ(0,"tr",46)}const Xe=function(i,u){return{"odd:bg-[#EFEFEF] dark:odd:bg-[#1E293BDB]":i,"even:bg-white dark:even:bg-[#1E293BDB]":u}};function Ve(i,u){if(1&i&&t._UZ(0,"tr",47),2&i){const e=u.$implicit;t.Q6J("ngClass",t.WLB(1,Xe,e,e))}}function We(i,u){1&i&&(t.TgZ(0,"div",48),t._uU(1," \u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 "),t.qZA())}function ti(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"app-pagination",49),t.NdJ("paginationEvent",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.onPaginationEvent(n))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("totalPagesCount",e.totalPagesCount)("size",e.size)("currentPage",e.currentPage)}}const ei=[{path:"",component:W,resolve:{},children:[{path:"active",component:(()=>{class i{constructor(e,o,n){this.dialog=e,this.driverService=o,this.authService=n,this.showFilter=!1,this.filter={driverId:null,name:null,phoneNumber:null,transportKind:null,subscribe:null,status:null},this.totalPagesCount=1,this.size=5,this.currentPage=1,this.isLoading=!1,this.displayedColumns=["index","id","full_name","phone","transport_kind","status","subscribe","offers","location","action"],this.sortOptions={id:{column:"id",direction:null},full_name:{column:"full_name",direction:null},transport_kind:{column:"transport_kind",direction:null},status:{column:"status",direction:null},subscribe:{column:"subscribe",direction:null},offers:{column:"offers",direction:null}}}ngOnInit(){this.currentUser=(0,M.o)(this.authService.accessToken),this.getData()}getData(e,o,n){const r={size:this.size,currentPage:this.currentPage};this.isLoading=!0,(0,k.of)({filter:e,sortBy:o,sortType:n}).pipe((0,G.w)(({filter:d,sortBy:g,sortType:D})=>this.driverService.getActiveDrivers(this.currentUser.merchantId,r,d,g,D).pipe((0,B.U)(J=>({success:J.success,data:J.data.content,totalPagesCount:J.data.totalPagesCount})),(0,X.K)(()=>(0,k.of)({success:!1,data:[],totalPagesCount:0}))))).subscribe({next:({success:d,data:g,totalPagesCount:D})=>{setTimeout(()=>{this.isLoading=!1},500),d?g.length>0?(this.dataSource=g,this.totalPagesCount=D):g||(this.dataSource=[]):this.dataSource=[]},error:()=>{this.isLoading=!1,this.dataSource=[]}})}create(){this.dialog.open(Wt,{autoFocus:!1,disableClose:!0}).afterClosed().subscribe(o=>{this.getData()})}showDetails(e){this.dialog.open(L,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"}})}showEdit(e){this.dialog.open(Jt,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"}}).afterClosed().subscribe(n=>{})}confirmModal(){this.dialog.open(Ut,{autoFocus:!1,disableClose:!0}).componentInstance.confirmResponse.subscribe(o=>{})}onPaginationEvent(e){this.size=e.size,this.currentPage=e.page,this.getData()}generateFilterPath(e){let o="";for(const n in e)null!=e[n]&&(o+=`&${n}=${encodeURIComponent(e[n])}`);return this.getData(),o.length>0?o.substr(1):o}applyFilter(){this.filter&&(this.filterPath=this.generateFilterPath(this.filter),this.getData(this.filterPath,this.sortColumn,this.sortDirection))}resetSearch(){this.filter&&(this.filter={driverId:null,name:null,phoneNumber:null,transportKind:null,subscribe:null,status:null},this.getData())}sortData(e){const o=this.sortOptions[e];o.direction=null===o.direction?"asc":"asc"===o.direction?"desc":null,this.sortColumn=e,this.sortDirection=o.direction,this.getData(this.filterPath,this.sortColumn,this.sortDirection)}getSortIcon(e){const o=this.sortOptions[e];return o.column===this.sortColumn&&"asc"===o.direction?"arrow_upward":o.column===this.sortColumn&&"desc"===o.direction?"arrow_downward":"unfold_more"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.uw),t.Y36(q),t.Y36(Q.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-active-drivers"]],standalone:!0,features:[t.jDz],decls:77,vars:15,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent","p-4"],[1,"flex","justify-between","items-center","my-5"],[1,"text-3xl","font-bold"],[1,"flex","justify-end","gap-2"],["mat-flat-button","",1,"fuse-mat-button-large","dark","dark:bg-[#1E293BDB]",3,"color","click"],[1,"filter","flex","items-center","gap-2"],[1,"h-[19px]"],[1,"flex-auto"],["type","number","matInput","","placeholder","ID \u041f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430 ",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","\u0424\u0418\u041e",3,"ngModel","ngModelChange"],["type","number","matInput","","placeholder","\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",3,"ngModel","ngModelChange"],["placeholder","\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430",3,"ngModel","ngModelChange"],["value","true"],["value","false"],[1,"mat-elevation-z8","my-6","relative","overflow-auto"],["class","loading-shade",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","index"],["class","font-extrabold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","font-extrabold cursor-pointer",3,"click",4,"matHeaderCellDef"],["matColumnDef","full_name"],["matColumnDef","phone"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","transport_kind"],["matColumnDef","status"],["mat-header-cell","","class","font-extrabold",4,"matHeaderCellDef"],["matColumnDef","subscribe"],["matColumnDef","offers"],["matColumnDef","location"],["matColumnDef","action"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","flex justify-center p-5 font-bold text-lg text-slate-600 ",4,"ngIf"],[3,"totalPagesCount","size","currentPage","paginationEvent",4,"ngIf"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell","",1,"font-extrabold"],["mat-cell",""],["mat-header-cell","",1,"font-extrabold","cursor-pointer",3,"click"],[1,"flex","justify-between","items-center"],["mat-header-cell",""],[1,"status-badge","relative",3,"ngClass"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"ngClass"],[1,"flex","justify-center","p-5","font-bold","text-lg","text-slate-600"],[3,"totalPagesCount","size","currentPage","paginationEvent"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0438"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.showFilter=!n.showFilter}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA(),t._uU(8," \u041f\u043e\u0438\u0441\u043a "),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.create()}),t.TgZ(10,"mat-icon"),t._uU(11,"add"),t.qZA(),t._uU(12," \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),t.qZA()()(),t.TgZ(13,"div",5)(14,"div"),t._UZ(15,"div",6),t.TgZ(16,"mat-form-field",7)(17,"input",8),t.NdJ("ngModelChange",function(s){return n.filter.driverId=s}),t.qZA()()(),t.TgZ(18,"div"),t._UZ(19,"div",6),t.TgZ(20,"mat-form-field",7)(21,"input",9),t.NdJ("ngModelChange",function(s){return n.filter.name=s}),t.qZA()()(),t.TgZ(22,"div"),t._UZ(23,"div",6),t.TgZ(24,"mat-form-field",7)(25,"input",10),t.NdJ("ngModelChange",function(s){return n.filter.phoneNumber=s}),t.qZA()()(),t.TgZ(26,"div"),t._UZ(27,"div",6),t.TgZ(28,"mat-form-field",7)(29,"mat-select",11),t.NdJ("ngModelChange",function(s){return n.filter.subscribe=s}),t.TgZ(30,"mat-option",12),t._uU(31,"\u0414\u0430"),t.qZA(),t.TgZ(32,"mat-option",13),t._uU(33,"\u041d\u0435\u0442"),t.qZA()()()(),t.TgZ(34,"button",4),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(35,"mat-icon"),t._uU(36,"refresh"),t.qZA()(),t.TgZ(37,"button",4),t.NdJ("click",function(){return n.applyFilter()}),t.TgZ(38,"mat-icon"),t._uU(39,"search"),t.qZA()()(),t.TgZ(40,"div",14),t.YNc(41,ee,2,1,"div",15),t.TgZ(42,"table",16),t.ynx(43,17),t.YNc(44,ie,2,0,"th",18),t.YNc(45,ne,2,1,"td",19),t.BQk(),t.ynx(46,20),t.YNc(47,oe,6,1,"th",21),t.YNc(48,ue,2,1,"td",19),t.BQk(),t.ynx(49,22),t.YNc(50,re,6,1,"th",21),t.YNc(51,ae,2,2,"td",19),t.BQk(),t.ynx(52,23),t.YNc(53,se,2,0,"th",24),t.YNc(54,le,2,1,"td",19),t.BQk(),t.ynx(55,25),t.YNc(56,ce,6,1,"th",21),t.YNc(57,pe,2,2,"td",19),t.BQk(),t.ynx(58,26),t.YNc(59,me,2,0,"th",27),t.YNc(60,fe,3,2,"td",19),t.BQk(),t.ynx(61,28),t.YNc(62,he,6,1,"th",21),t.YNc(63,ge,3,4,"td",19),t.BQk(),t.ynx(64,29),t.YNc(65,_e,6,1,"th",21),t.YNc(66,ve,2,1,"td",19),t.BQk(),t.ynx(67,30),t.YNc(68,Ce,2,0,"th",27),t.YNc(69,Ze,2,1,"td",19),t.BQk(),t.ynx(70,31),t.YNc(71,Te,1,0,"th",27),t.YNc(72,be,11,1,"td",32),t.BQk(),t.YNc(73,xe,1,0,"tr",33),t.YNc(74,De,1,4,"tr",34),t.qZA(),t.YNc(75,ye,2,0,"div",35),t.YNc(76,Fe,1,3,"app-pagination",36),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("color","primary"),t.xp6(4),t.Q6J("color","primary"),t.xp6(4),t.Q6J("@showHideFilter",n.showFilter?"show":"hide"),t.xp6(4),t.Q6J("ngModel",n.filter.driverId),t.xp6(4),t.Q6J("ngModel",n.filter.name),t.xp6(4),t.Q6J("ngModel",n.filter.phoneNumber),t.xp6(4),t.Q6J("ngModel",n.filter.subscribe),t.xp6(5),t.Q6J("color","primary"),t.xp6(3),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0==(null==n.dataSource?null:n.dataSource.length)),t.xp6(1),t.Q6J("ngIf",null==n.dataSource?null:n.dataSource.length))},dependencies:[S.Q,w.D,O.E,v.c,v.Nt,f.KE,x.LD,x.gD,b.ey,a.UX,a.Fj,a.wV,a.JJ,a.u5,a.On,C.Cq,C.Ou,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.lW,p.RK,b.si,T.Tx,T.VK,T.OP,T.p6,A.Nh,U.vV,N.X,_.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,_.mk],encapsulation:2,data:{animation:[(0,Z.X$)("showHideFilter",[(0,Z.SB)("show",(0,Z.oB)({height:"*",opacity:1,visibility:"visible"})),(0,Z.SB)("hide",(0,Z.oB)({height:"0",opacity:0,visibility:"hidden"})),(0,Z.eR)("show <=> hide",(0,Z.jt)("300ms ease-in-out"))])]}})}return i})()},{path:"archived",component:(()=>{class i{constructor(e,o,n){this.dialog=e,this.driverService=o,this.authService=n,this.showFilter=!1,this.filter={driverId:null,name:null,phoneNumber:null,transportKind:null,subscribe:null,status:null},this.totalPagesCount=1,this.size=5,this.currentPage=1,this.isLoading=!1,this.displayedColumns=["index","id","full_name","transport_kind","status","subscribe","offers","location","action"],this.sortOptions={id:{column:"id",direction:null},full_name:{column:"full_name",direction:null},transport_kind:{column:"transport_kind",direction:null},status:{column:"status",direction:null},subscribe:{column:"subscribe",direction:null},offers:{column:"offers",direction:null}}}ngOnInit(){this.currentUser=(0,M.o)(this.authService.accessToken),this.getData()}getData(e,o,n){const r={size:this.size,currentPage:this.currentPage};this.isLoading=!0,(0,k.of)({filter:e,sortBy:o,sortType:n}).pipe((0,G.w)(({filter:d,sortBy:g,sortType:D})=>this.driverService.getArchivedDrivers(this.currentUser.merchantId,r,d,g,D).pipe((0,B.U)(J=>({success:J.success,data:J.data.content,totalPagesCount:J.data.totalPagesCount})),(0,X.K)(()=>(0,k.of)({success:!1,data:[],totalPagesCount:0}))))).subscribe({next:({success:d,data:g,totalPagesCount:D})=>{setTimeout(()=>{this.isLoading=!1},500),d?g.length>0?(this.dataSource=g,this.totalPagesCount=D):g||(this.dataSource=[]):this.dataSource=[]},error:()=>{this.isLoading=!1,this.dataSource=[]}})}showDetails(e){this.dialog.open(L,{height:"100vh",autoFocus:!1,disableClose:!0,data:e,position:{top:"0",right:"0"}}).afterClosed().subscribe(n=>{})}onPaginationEvent(e){this.size=e.size,this.currentPage=e.page,this.getData()}generateFilterPath(e){let o="";for(const n in e)null!=e[n]&&(o+=`&${n}=${encodeURIComponent(e[n])}`);return this.getData(),o.length>0?o.substr(1):o}applyFilter(){this.filter&&(this.filterPath=this.generateFilterPath(this.filter),this.getData(this.filterPath,this.sortColumn,this.sortDirection))}resetSearch(){this.filter&&(this.filter={driverId:null,name:null,phoneNumber:null,transportKind:null,subscribe:null,status:null},this.getData())}sortData(e){const o=this.sortOptions[e];o.direction=null===o.direction?"asc":"asc"===o.direction?"desc":null,this.sortColumn=e,this.sortDirection=o.direction,this.getData(this.filterPath,this.sortColumn,this.sortDirection)}getSortIcon(e){const o=this.sortOptions[e];return o.column===this.sortColumn&&"asc"===o.direction?"arrow_upward":o.column===this.sortColumn&&"desc"===o.direction?"arrow_downward":"unfold_more"}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(c.uw),t.Y36(q),t.Y36(Q.e))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-archived-drivers"]],standalone:!0,features:[t.jDz],decls:70,vars:14,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent","p-4"],[1,"flex","justify-between","items-center","my-5"],[1,"text-3xl","font-bold"],[1,"flex","justify-end","gap-2"],["mat-flat-button","",1,"fuse-mat-button-large","dark","dark:bg-[#1E293BDB]",3,"color","click"],[1,"filter","flex","items-center","gap-2"],[1,"h-[19px]"],[1,"flex-auto"],["type","number","matInput","","placeholder","ID \u041f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0430 ",3,"ngModel","ngModelChange"],["type","text","matInput","","placeholder","\u0424\u0418\u041e",3,"ngModel","ngModelChange"],["type","number","matInput","","placeholder","\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",3,"ngModel","ngModelChange"],["placeholder","\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430",3,"ngModel","ngModelChange"],["value","true"],["value","false"],[1,"mat-elevation-z8","my-6","relative"],["class","loading-shade",4,"ngIf"],["mat-table","",1,"overflow-auto",3,"dataSource"],["matColumnDef","index"],["class","font-extrabold","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","","class","font-extrabold cursor-pointer",3,"click",4,"matHeaderCellDef"],["matColumnDef","full_name"],["matColumnDef","transport_kind"],["matColumnDef","status"],["mat-header-cell","","class","font-extrabold",4,"matHeaderCellDef"],["matColumnDef","subscribe"],["matColumnDef","offers"],["matColumnDef","location"],["matColumnDef","action"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","flex justify-center p-5 font-bold text-lg text-slate-600 ",4,"ngIf"],[3,"totalPagesCount","size","currentPage","paginationEvent",4,"ngIf"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell","",1,"font-extrabold"],["mat-cell",""],["mat-header-cell","",1,"font-extrabold","cursor-pointer",3,"click"],[1,"flex","justify-between","items-center"],[1,"status-badge","relative",3,"ngClass"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"],["mat-header-row",""],["mat-row","",1,"cursor-pointer",3,"ngClass"],[1,"flex","justify-center","p-5","font-bold","text-lg","text-slate-600"],[3,"totalPagesCount","size","currentPage","paginationEvent"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"\u0410\u0440\u0445\u0438\u0432\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0437\u0447\u0438\u043a\u0438"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return n.showFilter=!n.showFilter}),t.TgZ(6,"mat-icon"),t._uU(7,"search"),t.qZA(),t._uU(8," \u041f\u043e\u0438\u0441\u043a "),t.qZA()()(),t.TgZ(9,"div",5)(10,"div"),t._UZ(11,"div",6),t.TgZ(12,"mat-form-field",7)(13,"input",8),t.NdJ("ngModelChange",function(s){return n.filter.driverId=s}),t.qZA()()(),t.TgZ(14,"div"),t._UZ(15,"div",6),t.TgZ(16,"mat-form-field",7)(17,"input",9),t.NdJ("ngModelChange",function(s){return n.filter.name=s}),t.qZA()()(),t.TgZ(18,"div"),t._UZ(19,"div",6),t.TgZ(20,"mat-form-field",7)(21,"input",10),t.NdJ("ngModelChange",function(s){return n.filter.phoneNumber=s}),t.qZA()()(),t.TgZ(22,"div"),t._UZ(23,"div",6),t.TgZ(24,"mat-form-field",7)(25,"mat-select",11),t.NdJ("ngModelChange",function(s){return n.filter.subscribe=s}),t.TgZ(26,"mat-option",12),t._uU(27,"\u0414\u0430"),t.qZA(),t.TgZ(28,"mat-option",13),t._uU(29,"\u041d\u0435\u0442"),t.qZA()()()(),t.TgZ(30,"button",4),t.NdJ("click",function(){return n.resetSearch()}),t.TgZ(31,"mat-icon"),t._uU(32,"refresh"),t.qZA()(),t.TgZ(33,"button",4),t.NdJ("click",function(){return n.applyFilter()}),t.TgZ(34,"mat-icon"),t._uU(35,"search"),t.qZA()()(),t.TgZ(36,"div",14),t.YNc(37,we,2,1,"div",15),t.TgZ(38,"table",16),t.ynx(39,17),t.YNc(40,qe,2,0,"th",18),t.YNc(41,Ee,2,1,"td",19),t.BQk(),t.ynx(42,20),t.YNc(43,Je,6,1,"th",21),t.YNc(44,Ie,2,1,"td",19),t.BQk(),t.ynx(45,22),t.YNc(46,ke,6,1,"th",21),t.YNc(47,Qe,2,2,"td",19),t.BQk(),t.ynx(48,23),t.YNc(49,Pe,6,1,"th",21),t.YNc(50,Be,2,2,"td",19),t.BQk(),t.ynx(51,24),t.YNc(52,Me,2,0,"th",25),t.YNc(53,Oe,3,2,"td",19),t.BQk(),t.ynx(54,26),t.YNc(55,je,6,1,"th",21),t.YNc(56,Se,3,4,"td",19),t.BQk(),t.ynx(57,27),t.YNc(58,Re,6,1,"th",21),t.YNc(59,Le,2,1,"td",19),t.BQk(),t.ynx(60,28),t.YNc(61,ze,2,0,"th",25),t.YNc(62,He,2,1,"td",19),t.BQk(),t.ynx(63,29),t.YNc(64,$e,1,0,"th",25),t.YNc(65,Ke,9,1,"td",30),t.BQk(),t.YNc(66,Ge,1,0,"tr",31),t.YNc(67,Ve,1,4,"tr",32),t.qZA(),t.YNc(68,We,2,0,"div",33),t.YNc(69,ti,1,3,"app-pagination",34),t.qZA()()),2&o&&(t.xp6(5),t.Q6J("color","primary"),t.xp6(4),t.Q6J("@showHideFilter",n.showFilter?"show":"hide"),t.xp6(4),t.Q6J("ngModel",n.filter.driverId),t.xp6(4),t.Q6J("ngModel",n.filter.name),t.xp6(4),t.Q6J("ngModel",n.filter.phoneNumber),t.xp6(4),t.Q6J("ngModel",n.filter.subscribe),t.xp6(5),t.Q6J("color","primary"),t.xp6(3),t.Q6J("color","primary"),t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("dataSource",n.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",0==(null==n.dataSource?null:n.dataSource.length)),t.xp6(1),t.Q6J("ngIf",null==n.dataSource?null:n.dataSource.length))},dependencies:[S.Q,w.D,O.E,v.c,v.Nt,f.KE,x.LD,x.gD,b.ey,a.UX,a.Fj,a.wV,a.JJ,a.u5,a.On,C.Cq,C.Ou,F.TU,f.lN,h.Ps,h.Hw,p.ot,p.lW,p.RK,b.si,T.Tx,T.VK,T.OP,T.p6,A.Nh,U.vV,N.X,_.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,_.mk],encapsulation:2,data:{animation:[(0,Z.X$)("showHideFilter",[(0,Z.SB)("show",(0,Z.oB)({height:"*",opacity:1,visibility:"visible"})),(0,Z.SB)("hide",(0,Z.oB)({height:"0",opacity:0,visibility:"hidden"})),(0,Z.eR)("show <=> hide",(0,Z.jt)("300ms ease-in-out"))])]}})}return i})()}]}]}}]);